<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>coredump基础知识及操作-linux篇</title>
    <link href="/2023/10/24/coredump%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%8F%8A%E6%93%8D%E4%BD%9C-linux%E7%AF%87/"/>
    <url>/2023/10/24/coredump%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E5%8F%8A%E6%93%8D%E4%BD%9C-linux%E7%AF%87/</url>
    
    <content type="html"><![CDATA[<h2 id="1、coredump简介"><a href="#1、coredump简介" class="headerlink" title="1、coredump简介"></a>1、coredump简介</h2><p>​在系统的运行过程中，有许多时候会出现程序运行不正常的情况，进而产生崩溃现象，而为了方便记录和追溯问题的发生进程和或相关的线程信息，亦或是崩溃时间等，有了coredump这种文件。</p><ul><li><p>Linux中的dump文件为core文件，以core开头，类似如下：</p><p><img src="https://codestar.top/note-image/image-20230112112849208.png" alt="image-20230112112849208"></p></li><li><p>Windows中dump文件为dmp文件，类似如下：</p><p><img src="https://codestar.top/note-image/image-20230112112958003.png" alt="image-20230112112958003"></p></li></ul><h2 id="2、core生成限制"><a href="#2、core生成限制" class="headerlink" title="2、core生成限制"></a>2、core生成限制</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">检查core生成大小限制</span><br>ulimit -c<br><span class="hljs-meta prompt_"># </span><span class="language-bash">检查文件大小限制</span><br>ulimit<br><span class="hljs-meta prompt_"># </span><span class="language-bash">限制大小不超过1024KB</span><br>ulimit -c 1024<br></code></pre></td></tr></table></figure><p>返回值含义：</p><ul><li>0—-禁止生成core文件</li><li>ulimited—-未限制core大小</li><li>数值—-限制大小不超过该设定值KB</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">设定为无限制</span><br>ulimit -c unlimited<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20230112105439700.png" alt="image-20230112105439700"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">检查所有的用户配置，各项返回值含义同上</span><br>ulimit -a<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20230112113607292.png" alt="image-20230112113607292"></p><p>设定单一用户程序上限：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">设定单个用户程序上限为3：限制生成的dump数量</span><br>ulimit -u 3<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20230112114526249.png" alt="image-20230112114526249"></p><p>设定之后，会将单个程序的core数量限制在设定值之内：</p><p><img src="https://codestar.top/note-image/image-20231024014749829.png" alt="image-20231024014749829"></p><h2 id="3、core相关配置"><a href="#3、core相关配置" class="headerlink" title="3、core相关配置"></a>3、core相关配置</h2><h3 id="3-1、配置文件"><a href="#3-1、配置文件" class="headerlink" title="3-1、配置文件"></a>3-1、配置文件</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">配置文件</span><br>/proc/sys/kernel/core_pattern<br><span class="hljs-meta prompt_"># </span><span class="language-bash">查询结果为执行core生成的程序路径，及生成格式</span><br>cat /proc/sys/kernel/core_pattern<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20230112105615231.png" alt="image-20230112105615231"></p><p>程序段中记录着详细的core生成路径：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cat /bin/coredump-handler.sh<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20231024014844990.png" alt="image-20231024014844990"></p><h3 id="3-2、配置文件格式"><a href="#3-2、配置文件格式" class="headerlink" title="3-2、配置文件格式"></a>3-2、配置文件格式</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell">％p 转储过程的PID<br>％u （数字）转储进程的实际UID<br>％G （数字）转储过程的实际GID<br>％s 引起转储的信号数<br>％t 转储时间，表示为自1970年1月1日00:00:00 +0000（UTC）以来的秒数<br>％H 主机名（与uname（2）返回的节点名相同）<br>％e 可执行文件名（无路径前缀）<br>％E 可执行文件的路径名，用斜杠（’/’）替换为感叹号（’！’）。<br>％C 崩溃过程的核心文件大小软资源限制（自Linux 2.6.24开始）<br></code></pre></td></tr></table></figure><h2 id="4、core生成验证"><a href="#4、core生成验证" class="headerlink" title="4、core生成验证"></a>4、core生成验证</h2><p>使用kill指令或pkill指令来验证core生成逻辑：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">根据进程名来abort进程并生成core文件</span><br>pkill -6 proc_name<br><span class="hljs-meta prompt_"># </span><span class="language-bash">根据PID来abort进程并生成core文件</span><br>ps -aux | grep proc_name<br>kill -6 [PID]<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20231024014918951.png" alt="image-20231024014918951"></p><p><strong>拓展：</strong><code>kill -l</code>查看kill对应的信号量列表</p><p><img src="https://codestar.top/note-image/image-20230112142536039.png" alt="image-20230112142536039"></p><h2 id="5、core调试"><a href="#5、core调试" class="headerlink" title="5、core调试"></a>5、core调试</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">gdb 程序名称 core名称</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">示例：</span><br>gdb someip_manager core_someip_manager__6609_1672103695<br></code></pre></td></tr></table></figure><p>gdb面板输入<code>where</code>或者<code>bt</code>查找出错的那一行或函数，具体错误信息可以在<code>#0~#05</code>中查看：</p><p><img src="https://codestar.top/note-image/image-20230112142121648.png" alt="image-20230112142121648"></p><p><img src="https://codestar.top/note-image/image-20230112162822742.png" alt="image-20230112162822742"></p>]]></content>
    
    
    <categories>
      
      <category>Linux技术</category>
      
    </categories>
    
    
    <tags>
      
      <tag>调试技术</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux下如何开启允许root用户远程登录</title>
    <link href="/2023/10/23/Linux%E4%B8%8B%E5%A6%82%E4%BD%95%E5%BC%80%E5%90%AF%E5%85%81%E8%AE%B8root%E7%94%A8%E6%88%B7%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95/"/>
    <url>/2023/10/23/Linux%E4%B8%8B%E5%A6%82%E4%BD%95%E5%BC%80%E5%90%AF%E5%85%81%E8%AE%B8root%E7%94%A8%E6%88%B7%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95/</url>
    
    <content type="html"><![CDATA[<h2 id="1、背景"><a href="#1、背景" class="headerlink" title="1、背景"></a>1、背景</h2><p>在很多时候，远程登录使用的是用户身份登录，在系统路径下的文件无法通过用户角色直接下载。下载的话，需要将文件移动到当前用户有权限的路径下才能下载，比较麻烦。而另一种下载方法是以root用户的身份登录系统进行原路径下载，但多数SSH为了提高系统安全性，<strong>默认关闭了root远程登录的权限</strong>，需手动配置SSH，使其能够允许root远程登录，以Ubuntu系统为参考，具体操作如下。</p><h2 id="2、配置SSH"><a href="#2、配置SSH" class="headerlink" title="2、配置SSH"></a>2、配置SSH</h2><ul><li>查找配置文件</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">一般为这个路径：</span><br>/etc/ssh/sshd_config<br><span class="hljs-meta prompt_"># </span><span class="language-bash">无此路径的情况下直接查找配置文件</span><br>find / -name *sshd_config<br></code></pre></td></tr></table></figure><ul><li>修改配置文件</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">vim /etc/ssh/sshd_config<br><span class="hljs-meta prompt_"># </span><span class="language-bash">键入i进入编辑模式，加入以下内容。wq保存</span><br>PermitRootLogin yes<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20230530115045644.png" alt="image-20230530115045644"></p><h2 id="3、重启服务进程"><a href="#3、重启服务进程" class="headerlink" title="3、重启服务进程"></a>3、重启服务进程</h2><h3 id="3-1、SSH与SSHD进程的区别"><a href="#3-1、SSH与SSHD进程的区别" class="headerlink" title="3-1、SSH与SSHD进程的区别"></a>3-1、SSH与SSHD进程的区别</h3><p>SSH与SSHD主要区别在于主动或被动连接：</p><ul><li>SSH为<strong>客户端</strong>主动远程其他设备即服务端；</li><li>SSHD为<strong>服务端</strong>被动接收来其他设备的SSH请求。</li></ul><p>具体差异点总结如下：</p><table><thead><tr><th>类别</th><th align="left">SSH</th><th>SSHD</th></tr></thead><tbody><tr><td>定义</td><td align="left">SSH是Secure Shell的缩写，它是一种加密网络协议，用于远程登录和安全文件传输。</td><td>SSHD是SSH Daemon的缩写，是运行在服务器端的SSH软件守护进程。</td></tr><tr><td>作用</td><td align="left">用来进行远程连接、远程管理和传输文件等操作。</td><td>作为服务器端软件，接收来自客户端的连接请求，并为其提供安全的远程登录和文件传输功能。</td></tr><tr><td>运行位置</td><td align="left">运行在<strong>客户端</strong>上。</td><td>运行在<strong>服务端</strong>上。</td></tr><tr><td>端口号</td><td align="left">默认使用22端口。</td><td>默认使用22端口。</td></tr><tr><td>用户验证</td><td align="left">通过用户名和密码进行验证。</td><td>支持多种用户验证方式，包括用户名和密码、公钥认证、Kerberos身份验证等。</td></tr><tr><td>安全性</td><td align="left">基于公开密钥加密技术，采用对称加密和非对称加密相结合的方式保证数据传输的安全性。</td><td>通过数字证书和加密算法保障通信过程中数据的安全性和完整性。</td></tr><tr><td>使用范围</td><td align="left">适用于Linux、Unix、Mac OS等操作系统。</td><td>适用于Linux、Unix、Mac OS等操作系统。</td></tr></tbody></table><h3 id="3-2、重启SSHD生效配置"><a href="#3-2、重启SSHD生效配置" class="headerlink" title="3-2、重启SSHD生效配置"></a>3-2、重启SSHD生效配置</h3><p>以下指令重启SSHD服务，两条指令等价：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell">systemctl restart sshd<br><span class="hljs-meta prompt_"># </span><span class="language-bash">或</span><br>service sshd restart<br></code></pre></td></tr></table></figure><p>执行上述指令会重启SSHD服务，也就是重启整个SSH<strong>服务器进程</strong>，同时也会<strong>重新加载配置文件</strong>。这个命令通常用于对SSH服务器进行设置和调试时，或者在修改SSH服务配置后使其生效。执行该命令不会影响其他正在运行的进程，只会重启SSH服务进程。</p><h2 id="4、root用户下载文件"><a href="#4、root用户下载文件" class="headerlink" title="4、root用户下载文件"></a>4、root用户下载文件</h2><h3 id="4-1、root用户远程登录"><a href="#4-1、root用户远程登录" class="headerlink" title="4-1、root用户远程登录"></a>4-1、root用户远程登录</h3><p>使用远程登录软件或平台填入root名称及Linux设备IP，这里我使用的是<strong>MobaXterm</strong>，之后会认证要求输入root密码，登入即可：</p><p><img src="https://codestar.top/note-image/image-20230530120223288.png" alt="image-20230530120223288"></p><p>登录成功如下，进入Linux服务器shell面板：</p><p><img src="https://codestar.top/note-image/image-20230530120301175.png" alt="image-20230530120301175"></p><h3 id="4-2、下载文件"><a href="#4-2、下载文件" class="headerlink" title="4-2、下载文件"></a>4-2、下载文件</h3><p>使用ftp下载工具：如FileZilla，xftp、MobaXterm（集成到软件内部），同样输入Linux端IP、用户名（root）、密码及端口（22）登录远程设备，进入需要下载的文件路径，拖动文件至本地路径下载即可：</p><p><img src="https://codestar.top/note-image/image-20230530120934802.png" alt="image-20230530120934802"></p>]]></content>
    
    
    <categories>
      
      <category>Linux技术</category>
      
      <category>Linux</category>
      
    </categories>
    
    
    <tags>
      
      <tag>SSH远程</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Python安装报错之0x80072f7d错误解决方法</title>
    <link href="/2023/10/21/Python%E5%AE%89%E8%A3%85%E6%8A%A5%E9%94%99%E4%B9%8B0x80072f7d%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/"/>
    <url>/2023/10/21/Python%E5%AE%89%E8%A3%85%E6%8A%A5%E9%94%99%E4%B9%8B0x80072f7d%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/</url>
    
    <content type="html"><![CDATA[<h2 id="一、问题现象"><a href="#一、问题现象" class="headerlink" title="一、问题现象"></a>一、问题现象</h2><p>安装过程中出现报错：0x80072f7d - 未指定的错误</p><p><img src="https://codestar.top/note-image/image-20231022234449760.png" alt="image-20231022234449760"></p><p>这个问题发生，导致后续无法配置Python环境，必须要解决掉它。</p><h2 id="二、问题原因"><a href="#二、问题原因" class="headerlink" title="二、问题原因"></a>二、问题原因</h2><p>为了弄清是什么原因导致出现这种致命性问题，去找了一下”度娘”，发现原因如下：</p><blockquote><p>在Python的安装过程中，会涉及到数据传输，其中会涉及到一个协议TLS，安全传输层协议，安装Python的过程中必须要TLS协议的支持，我本机没有开启TLS协议导致出错。目前TLS1.2是常见传输协议版本，不过有的网站还是TLS1.1。所以得同时开启两个协议，TLS1.1、TLS1.2，具体操作来看解决方法。</p></blockquote><h2 id="三、解决方法"><a href="#三、解决方法" class="headerlink" title="三、解决方法"></a>三、解决方法</h2><p>1、<kbd>win</kbd>+<kbd>r</kbd>打开运行界面，输入<code>control</code>，打开控制面板：</p><p>2、进入“网络和Internet”：</p><p><img src="https://codestar.top/note-image/image-20231022234509493.png" alt="image-20231022234509493"></p><p>2、点击“Internet选项”：</p><p><img src="https://codestar.top/note-image/image-20231022234640504.png" alt="image-20231022234640504"></p><p>3、“Internet属性”中进入“高级”，勾选“使用TLS1.1”、“使用TLS1.2”：</p><p><img src="https://codestar.top/note-image/image-20231022234803305.png" alt="image-20231022234803305"></p><p>点击应用，重新安装Python。</p><h2 id="四、重新安装Python"><a href="#四、重新安装Python" class="headerlink" title="四、重新安装Python"></a>四、重新安装Python</h2><p>重新安装，选择对应的安装路径和安装选项，一路下一步安装即可，中间安装各类包需要费些时间，等待安装成功即可：</p><p><img src="https://codestar.top/note-image/image-20231022234824356.png" alt="image-20231022234824356"></p><p>大功告成，安装成功~</p><p><img src="https://codestar.top/note-image/image-20231022234840585.png" alt="image-20231022234840585"></p>]]></content>
    
    
    <categories>
      
      <category>程序语言学习</category>
      
    </categories>
    
    
    <tags>
      
      <tag>Python</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Windows中Java安装及环境变量配置</title>
    <link href="/2023/10/21/Windows%E4%B8%ADJava%E5%AE%89%E8%A3%85%E5%8F%8A%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE/"/>
    <url>/2023/10/21/Windows%E4%B8%ADJava%E5%AE%89%E8%A3%85%E5%8F%8A%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F%E9%85%8D%E7%BD%AE/</url>
    
    <content type="html"><![CDATA[<h2 id="1、下载jdk安装包"><a href="#1、下载jdk安装包" class="headerlink" title="1、下载jdk安装包"></a>1、下载jdk安装包</h2><p>通过以下镜像站下载jdk安装包：<a href="https://www.techspot.com/downloads/5553-java-jdk.html">https://www.techspot.com/downloads/5553-java-jdk.html</a></p><p>这里我选择的是Java11，选择对应的平台下载即可：</p><p><img src="https://codestar.top/note-image/image-20230820212852255.png" alt="image-20230820212852255"></p><p>在该页面下，还有Java其他的版本提供下载，需要的可以进入对应页面用同样的方式下载：</p><p><img src="https://codestar.top/note-image/image-20230820212953315.png" alt="image-20230820212953315"></p><h2 id="2、安装JDK"><a href="#2、安装JDK" class="headerlink" title="2、安装JDK"></a>2、安装JDK</h2><p>下载完成之后，双击安装包：</p><p><img src="https://codestar.top/note-image/image-20230820213208823.png" alt="image-20230820213208823"></p><p>根据安装向导，自定义安装路径，一路安装完成即可。安装完成了之后，还无法使用，需要配置环境变量才能在PC中各环境下使用。</p><h2 id="3、配置环境变量"><a href="#3、配置环境变量" class="headerlink" title="3、配置环境变量"></a>3、配置环境变量</h2><h3 id="3-1、环境变量配置页进入"><a href="#3-1、环境变量配置页进入" class="headerlink" title="3.1、环境变量配置页进入"></a>3.1、环境变量配置页进入</h3><p>环境变量需要配置的内容有三点，分别是JAVA_HOME、CLASSPATH、path。Windows中<kbd>win</kbd>+<kbd>r</kbd>打开运行面板，输入<code>sysdm.cpl</code>，进入<strong>系统属性</strong>页面：</p><p><img src="https://codestar.top/note-image/image-20230820213715533.png" alt="image-20230820213715533"></p><p>之后切到<strong>高级</strong>页签，点击<strong>环境变量</strong>进入环境变量配置页面，进入之后就开始配置具体的变量名了：</p><p><img src="https://codestar.top/note-image/image-20230820213825582.png" alt="image-20230820213825582"></p><h3 id="3-2、环境变量1：JAVA-HOME"><a href="#3-2、环境变量1：JAVA-HOME" class="headerlink" title="3.2、环境变量1：JAVA_HOME"></a>3.2、环境变量1：JAVA_HOME</h3><p>在系统变量中，<strong>新建</strong>环境变量，变量名给”JAVA_HOME”，变量值<strong>填入JAVA的安装根目录</strong>：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">根据实际情况填入</span><br>D:\JDK11<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20230820214141226.png" alt="image-20230820214141226"></p><h3 id="3-3、环境变量2：CLASSPATH"><a href="#3-3、环境变量2：CLASSPATH" class="headerlink" title="3.3、环境变量2：CLASSPATH"></a>3.3、环境变量2：CLASSPATH</h3><p>这个环境变量配置的为<strong>JAVA所有依赖的包路径</strong>。</p><p>同样，在系统变量中<strong>新建</strong>环境变量，变量名给”CLASSPATH”，变量值填入：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">注意，最前面有个.</span><br>.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar;<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20230820214359184.png" alt="image-20230820214359184"></p><p>%JAVA_HOME%意思为取<strong>名称为”JAVA_HOME”的环境变量</strong>的值，即写成这样也可以，两者等价：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">.;D:\JDK11\lib\dt.jar;D:\JDK11\lib\tools.jar;<br></code></pre></td></tr></table></figure><p>推荐上面的写法，方便管理。</p><h3 id="3-4、环境变量3：Path"><a href="#3-4、环境变量3：Path" class="headerlink" title="3.4、环境变量3：Path"></a>3.4、环境变量3：Path</h3><p>这个环境变量配置的为<strong>Java中jdk和jre的可执行bin文件</strong>。</p><p>找到Path环境变量，新建两条，填入以下内容：Windows10中建议分开写，不然会出现无法识别。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">合并写法</span><br><span class="hljs-meta prompt_">%</span><span class="language-bash">JAVA_HOME%\bin;%JAVA_HOME%\jre\bin;</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">分开写法</span><br><span class="hljs-meta prompt_">%</span><span class="language-bash">JAVA_HOME%\bin</span><br><span class="hljs-meta prompt_">%</span><span class="language-bash">JAVA_HOME%\jre\bin</span><br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20230820215621671.png" alt="image-20230820215621671"></p><h2 id="4、验证安装"><a href="#4、验证安装" class="headerlink" title="4、验证安装"></a>4、验证安装</h2><p>进入powershell面板，输入<code>java --version</code>验证配置，如果正常返回版本号，则环境配置成功：</p><p><img src="https://codestar.top/note-image/image-20230820215906035.png" alt="image-20230820215906035"></p>]]></content>
    
    
    <categories>
      
      <category>程序语言学习</category>
      
    </categories>
    
    
    <tags>
      
      <tag>JAVA</tag>
      
      <tag>Windows</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>笔记本安装纯净Ubuntu 22.04 LTS系统全流程</title>
    <link href="/2023/10/12/%E7%AC%94%E8%AE%B0%E6%9C%AC%E5%AE%89%E8%A3%85%E7%BA%AF%E5%87%80Ubuntu%2022.04%20LTS%E7%B3%BB%E7%BB%9F%E5%85%A8%E6%B5%81%E7%A8%8B/"/>
    <url>/2023/10/12/%E7%AC%94%E8%AE%B0%E6%9C%AC%E5%AE%89%E8%A3%85%E7%BA%AF%E5%87%80Ubuntu%2022.04%20LTS%E7%B3%BB%E7%BB%9F%E5%85%A8%E6%B5%81%E7%A8%8B/</url>
    
    <content type="html"><![CDATA[<h2 id="1、镜像下载"><a href="#1、镜像下载" class="headerlink" title="1、镜像下载"></a>1、镜像下载</h2><p>阿里云镜像站下载Ubuntu 22.04 LTS系统镜像：<a href="https://mirrors.aliyun.com/ubuntu-releases/22.04/">https://mirrors.aliyun.com/ubuntu-releases/22.04/</a></p><p><img src="https://codestar.top/note-image/image-20221103221343334.png" alt="image-20221103221343334"></p><h2 id="2、启动盘制作"><a href="#2、启动盘制作" class="headerlink" title="2、启动盘制作"></a>2、启动盘制作</h2><p><img src="https://codestar.top/note-image/image-20221031235342705.png" alt="image-20221031235342705"></p><p>打开后的镜像在这里：</p><p><img src="https://codestar.top/note-image/image-20221031235414003.png" alt="image-20221031235414003"></p><p>点击启动-写入硬盘映像，该步骤<strong>需要管理员</strong>权限：</p><p><img src="https://codestar.top/note-image/image-20221031235725870.png" alt="image-20221031235725870"></p><p>镜像文件会自动同步：</p><p>选择对应的磁盘驱动器和写入方式：注意别选错盘，该步骤会对选中盘先进行格式化。</p><p><img src="https://codestar.top/note-image/image-20221031235652288.png" alt="image-20221031235652288"></p><p>点击写入，开始制作。大约3-5分钟：</p><p><img src="https://codestar.top/note-image/image-20221101201949072.png" alt="image-20221101201949072"></p><p>刻录成功：</p><p><img src="https://codestar.top/note-image/image-20221101202254151.png" alt="image-20221101202254151"></p><h2 id="3、系统安装"><a href="#3、系统安装" class="headerlink" title="3、系统安装"></a>3、系统安装</h2><h3 id="3-1、BIOS设置"><a href="#3-1、BIOS设置" class="headerlink" title="3-1、BIOS设置"></a>3-1、BIOS设置</h3><ul><li>SATA工作方式确认</li></ul><p>笔记本开启按<strong>F2</strong>进入BIOS，确保为AHCI模式，之后保存配置重启。</p><p>&#x3D;&#x3D;注：&#x3D;&#x3D;不同品牌笔记本进入BIOS不太一样，本文以戴尔笔记本为例。</p><p><img src="https://codestar.top/note-image/image-20221103221825965.png" alt="image-20221103221825965"></p><ul><li>切换U盘启动</li></ul><p>重启按<strong>F12</strong>进入启动方式选择，在UEFI选项中选择USB设备，选中后回车，启动安装。</p><p><img src="https://codestar.top/note-image/image-20221103222031067.png" alt="image-20221103222031067"></p><h3 id="3-2、Ubuntu安装引导"><a href="#3-2、Ubuntu安装引导" class="headerlink" title="3-2、Ubuntu安装引导"></a>3-2、Ubuntu安装引导</h3><ul><li>安装界面</li></ul><p>选择<strong>*Try or Install Ubuntu</strong></p><p><img src="https://codestar.top/note-image/image-20221103222341452.png" alt="image-20221103222341452"></p><p>进入启动页面</p><p><img src="https://codestar.top/note-image/image-20221103222459925.png" alt="image-20221103222459925"></p><ul><li>安装引导</li></ul><p>语言下拉到列表最下方，选择<strong>中文(简体)<strong>，点击</strong>安装Ubuntu</strong></p><p><img src="https://codestar.top/note-image/image-20221103222550069.png" alt="image-20221103222550069"></p><ul><li>键盘布局</li></ul><p>两项均选择Chinese，点击继续</p><p><img src="https://codestar.top/note-image/image-20221103222703887.png" alt="image-20221103222703887"></p><ul><li>软件安装</li></ul><p>选中正常安装，想节省安装时间，可以取消勾选”<strong>安装Ubuntu时下载更新</strong>“，点击继续</p><p><img src="https://codestar.top/note-image/image-20221103222819398.png" alt="image-20221103222819398"></p><ul><li>安装类型</li></ul><p>如果想同Windows共存，选择第一项。此处我需要安装纯Ubuntu系统，选择第二项。点击继续</p><p><img src="https://codestar.top/note-image/image-20221103223137388.png" alt="image-20221103223137388"></p><p><strong>注：</strong>如果需要ZFS文件系统，可以在高级特性中选择，添加。</p><p><img src="https://codestar.top/note-image/image-20221103223320624.png" alt="image-20221103223320624"></p><ul><li>选择安装盘</li></ul><p>选择需要清除并安装的系统盘，点击继续安装</p><p><img src="https://codestar.top/note-image/image-20221103223203877.png" alt="image-20221103223203877"></p><p>提示写入确定弹窗，会进行格式化，点击继续即可：</p><p><img src="https://codestar.top/note-image/image-20221103223420973.png" alt="image-20221103223420973"></p><ul><li>时区选择</li></ul><p>搜索选择，上海时区，点击继续</p><p><img src="https://codestar.top/note-image/image-20221103223420973.png" alt="image-20221103223420973"></p><ul><li>设置用户名</li></ul><p><img src="https://codestar.top/note-image/image-20221103223645533.png" alt="image-20221103223645533"></p><ul><li>进入安装过程</li></ul><p><img src="https://codestar.top/note-image/image-20221103223714202.png" alt="image-20221103223714202"></p><p><img src="https://codestar.top/note-image/image-20221103223721816.png" alt="image-20221103223721816"></p><ul><li>安装完成启动</li></ul><p>安装完成后需要移除U盘，再启动。</p><p><img src="https://codestar.top/note-image/image-20221103223747669.png" alt="image-20221103223747669"></p><p>启动完成，就大功告成啦：</p><p><img src="https://codestar.top/note-image/image-20221103223839534.png" alt="image-20221103223839534"></p>]]></content>
    
    
    <categories>
      
      <category>Linux技术</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux系统搭建</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Ubuntu 22.04 LTS静态IP配置及源更新</title>
    <link href="/2023/10/12/Ubuntu%2022.04%20LTS%E9%9D%99%E6%80%81IP%E9%85%8D%E7%BD%AE%E5%8F%8A%E6%BA%90%E6%9B%B4%E6%96%B0/"/>
    <url>/2023/10/12/Ubuntu%2022.04%20LTS%E9%9D%99%E6%80%81IP%E9%85%8D%E7%BD%AE%E5%8F%8A%E6%BA%90%E6%9B%B4%E6%96%B0/</url>
    
    <content type="html"><![CDATA[<h2 id="1、网络模式确认"><a href="#1、网络模式确认" class="headerlink" title="1、网络模式确认"></a>1、网络模式确认</h2><p><strong>注：</strong>以下操作均基于VMWARE虚拟环境，需要确认虚拟网络配置为NAT模式。</p><p>检查方式：编辑——&gt;虚拟网络编辑器，进入到以下页面。配置和记住当前设置的<strong>网关IP、子网掩码、IP段</strong></p><p><img src="https://codestar.top/note-image/image-20221007114038651.png" alt="image-20221007114038651"></p><h2 id="2、静态IP配置"><a href="#2、静态IP配置" class="headerlink" title="2、静态IP配置"></a>2、静态IP配置</h2><h3 id="2-1、切换管理员权限"><a href="#2-1、切换管理员权限" class="headerlink" title="2-1、切换管理员权限"></a>2-1、切换管理员权限</h3><p>开启虚拟机，进入到terminal，切换到管理员模式：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">执行后输入登录用户密码</span><br>sudo -i<br><span class="hljs-meta prompt_"># </span><span class="language-bash">初装系统root密码为随机密码，需要自行更改</span><br>passwd root<br><span class="hljs-meta prompt_"># </span><span class="language-bash">按照提示之后输入命令更改密码，提示successful为更新成功</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">之后登录执行以下指令直接进入管理员模式</span><br>su<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20221007144407345.png" alt="image-20221007144407345"></p><h3 id="2-2、修改网络配置"><a href="#2-2、修改网络配置" class="headerlink" title="2-2、修改网络配置"></a>2-2、修改网络配置</h3><p>Ubuntu自17.10版本以来，引入了Netplan网络配置工具，通过netplan进行管理，对应的配置文件如下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">新安装的系统建议使用vi或nano编辑器修改文件内容，不支持vim</span><br>vi /etc/netplan/01-network-manager-all.yaml<br>nano /etc/netplan/01-network-manager-all.yaml<br></code></pre></td></tr></table></figure><p>配置内容：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">Let NetworkManager manage all devices on this system</span><br>network:<br>  ethernets:<br>    ens33:<br>      dhcp4: no<br>      dhcp6: no<br>      # 该项可选，不加也可行<br>      optional: true<br>      addresses:<br>      # 静态IP，需要在第一节配置的IP段内<br>       - 192.168.31.103/24<br>      routes:<br>       - to: default<br>       # 网关设置，需要和第一节检查的网关一致<br>         via: 192.168.31.2<br>      nameservers:<br>      # 网关配置格式还可采用该格式，多个地址采用英文逗号相隔<br>      # addresses: [114.114.114.114,8.8.8.8]<br>        addresses:<br>          - 114.114.114.114<br>          - 8.8.8.8<br>        search:<br>          - localhost<br>          - local<br>  version: 2<br>  renderer: NetworkManager<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20221007153350141.png" alt="image-20221007153350141"></p><h3 id="2-3、生效配置"><a href="#2-3、生效配置" class="headerlink" title="2-3、生效配置"></a>2-3、生效配置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">测试配置；正常如下</span><br>sudo netplan try<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20221007154513775.png" alt="image-20221007154513775"></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">应用配置：不报错即可</span><br>sudo netplan apply<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20221007151929466.png" alt="image-20221007151929466"></p><p>检查是否生效：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ip addr<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20221007151023164.png" alt="image-20221007151023164"></p><p>连通性检查：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">ping www.baidu.com<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20221007151121767.png" alt="image-20221007151121767"></p><h3 id="2-4、常用工具安装"><a href="#2-4、常用工具安装" class="headerlink" title="2-4、常用工具安装"></a>2-4、常用工具安装</h3><p>在系统使用过程中有一些工具为常用工具，建议安装，如vim、net-tools（对应ifconfig指令）、curl。该部分内容自行参考安装。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">vim编辑器，vi的升级版</span><br>apt install vim -y<br><span class="hljs-meta prompt_"># </span><span class="language-bash">ifconfig、netstat命令工具</span><br>apt install net-tools -y<br><span class="hljs-meta prompt_"># </span><span class="language-bash">web服务器请求工具</span><br>apt install curl -y<br><span class="hljs-meta prompt_"># </span><span class="language-bash">执行以下指令一键安装</span><br>apt install vim -y;apt install net-tools -y;apt install curl -y<br></code></pre></td></tr></table></figure><h2 id="3、镜像源更新"><a href="#3、镜像源更新" class="headerlink" title="3、镜像源更新"></a>3、镜像源更新</h2><h3 id="3-1、可用源列表"><a href="#3-1、可用源列表" class="headerlink" title="3-1、可用源列表"></a>3-1、可用源列表</h3><p><strong>注：</strong>不同系统版本设定的源不同，以下针对22.04版本。</p><h4 id="1）清华源"><a href="#1）清华源" class="headerlink" title="1）清华源"></a>1）清华源</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">默认注释了源码镜像以提高 apt update 速度，如有需要可自行取消注释</span><br>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse<br><span class="hljs-meta prompt_"># </span><span class="language-bash">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy main restricted universe multiverse</span><br>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse<br><span class="hljs-meta prompt_"># </span><span class="language-bash">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse</span><br>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse<br><span class="hljs-meta prompt_"># </span><span class="language-bash">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse</span><br>deb https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse<br><span class="hljs-meta prompt_"># </span><span class="language-bash">deb-src https://mirrors.tuna.tsinghua.edu.cn/ubuntu/ jammy-security main restricted universe multiverse</span><br></code></pre></td></tr></table></figure><h4 id="2）阿里源"><a href="#2）阿里源" class="headerlink" title="2）阿里源"></a>2）阿里源</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">deb http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse<br>deb-src http://mirrors.aliyun.com/ubuntu/ jammy main restricted universe multiverse<br>deb http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse<br>deb-src http://mirrors.aliyun.com/ubuntu/ jammy-security main restricted universe multiverse<br>deb http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse<br>deb-src http://mirrors.aliyun.com/ubuntu/ jammy-updates main restricted universe multiverse<br>deb http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiverse<br>deb-src http://mirrors.aliyun.com/ubuntu/ jammy-proposed main restricted universe multiverse<br>deb http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse<br>deb-src http://mirrors.aliyun.com/ubuntu/ jammy-backports main restricted universe multiverse<br></code></pre></td></tr></table></figure><h4 id="3）中科大源"><a href="#3）中科大源" class="headerlink" title="3）中科大源"></a>3）中科大源</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">deb https://mirrors.ustc.edu.cn/ubuntu/ jammy main restricted universe multiverse<br>deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy main restricted universe multiverse<br>deb https://mirrors.ustc.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse<br>deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-updates main restricted universe multiverse<br>deb https://mirrors.ustc.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse<br>deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-backports main restricted universe multiverse<br>deb https://mirrors.ustc.edu.cn/ubuntu/ jammy-security main restricted universe multiverse<br>deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-security main restricted universe multiverse<br>deb https://mirrors.ustc.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse<br>deb-src https://mirrors.ustc.edu.cn/ubuntu/ jammy-proposed main restricted universe multiverse<br></code></pre></td></tr></table></figure><h4 id="4）网易源"><a href="#4）网易源" class="headerlink" title="4）网易源"></a>4）网易源</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs shell">deb http://mirrors.163.com/ubuntu/ jammy main restricted universe multiverse<br>deb http://mirrors.163.com/ubuntu/ jammy-security main restricted universe multiverse<br>deb http://mirrors.163.com/ubuntu/ jammy-updates main restricted universe multiverse<br>deb http://mirrors.163.com/ubuntu/ jammy-proposed main restricted universe multiverse<br>deb http://mirrors.163.com/ubuntu/ jammy-backports main restricted universe multiverse<br>deb-src http://mirrors.163.com/ubuntu/ jammy main restricted universe multiverse<br>deb-src http://mirrors.163.com/ubuntu/ jammy-security main restricted universe multiverse<br>deb-src http://mirrors.163.com/ubuntu/ jammy-updates main restricted universe multiverse<br>deb-src http://mirrors.163.com/ubuntu/ jammy-proposed main restricted universe multiverse<br>deb-src http://mirrors.163.com/ubuntu/ jammy-backports main restricted universe multiverse<br></code></pre></td></tr></table></figure><h3 id="3-2、更新源"><a href="#3-2、更新源" class="headerlink" title="3-2、更新源"></a>3-2、更新源</h3><p>将原来的源文件进行备份：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">mv /etc/apt/sources.list /etc/apt/sources.list.bak<br></code></pre></td></tr></table></figure><p>新建源文件：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">填入上一节的任意一项可用源，之后执行Esc : 输入wq保存退出</span><br>vi /etc/apt/sources.list<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20221007150111288.png" alt="image-20221007150111288"></p><p>更新软件源：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">apt update -y<br></code></pre></td></tr></table></figure><p><img src="https://codestar.top/note-image/image-20221007145149148.png" alt="image-20221007145149148"></p>]]></content>
    
    
    <categories>
      
      <category>Linux技术</category>
      
    </categories>
    
    
    <tags>
      
      <tag>linux系统搭建</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Linux下CPU压测执行指导</title>
    <link href="/2023/10/12/Linux%E4%B8%8BCPU%E5%8E%8B%E6%B5%8B%E6%89%A7%E8%A1%8C%E6%8C%87%E5%AF%BC/"/>
    <url>/2023/10/12/Linux%E4%B8%8BCPU%E5%8E%8B%E6%B5%8B%E6%89%A7%E8%A1%8C%E6%8C%87%E5%AF%BC/</url>
    
    <content type="html"><![CDATA[<h2 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h2><p>拉起两个进程，执行文件拷贝，输出空文件。可压测到100%，持续执行。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">for i in `seq 1 $(cat /proc/cpuinfo |grep &quot;physical id&quot; |wc -l)`; do dd if=/dev/zero of=/dev/null &amp; done<br></code></pre></td></tr></table></figure><h2 id="方法二"><a href="#方法二" class="headerlink" title="方法二"></a>方法二</h2><p>持续计算圆周率，bc命令。可压测到100</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">计算小数点后5000位</span><br>echo &quot;scale=5000; 4*a(1)&quot; | bc -l -q<br></code></pre></td></tr></table></figure><h2 id="方法三"><a href="#方法三" class="headerlink" title="方法三"></a>方法三</h2><p>编写一个循环，可压测到65%左右，持续执行。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">编写一个脚本文件，持续执行该循环，往空文件中写入1。实际不会生成新文件。</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">filename=cputest.sh</span><br>while [ 1 ]<br>do<br>echo 1 &gt;&gt; /dev/null<br>done<br><span class="hljs-meta prompt_"># </span><span class="language-bash">添加执行权限</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">或执行<span class="hljs-built_in">chmod</span> +x cputest.sh</span><br>chmod 777 cputest.sh<br></code></pre></td></tr></table></figure><h2 id="方法四"><a href="#方法四" class="headerlink" title="方法四"></a>方法四</h2><p>模拟用户不断地访问，并发进程，</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">************常规执行*************</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">不会占用过多资源</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">!/bin/bash</span><br>Njob=15    #任务总数<br>for ((i=0; i&lt;$Njob; i++)); do<br>&#123;<br>          echo  &quot;progress $i is sleeping for 3 seconds zzz…&quot;<br>          sleep  3<br>&#125;<br>done<br>echo -e &quot;time-consuming: $SECONDS    seconds&quot;    #显示脚本执行耗时<br><span class="hljs-meta prompt_"># </span><span class="language-bash">************并发执行*************</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">!/bin/bash</span><br>Njob=15<br>for ((i=0; i&lt;$Njob; i++)); do<br>          echo  &quot;progress $i is sleeping for 3 seconds zzz…&quot;<br>          sleep  3 &amp;       #循环内容放到后台执行<br>done<br>wait      #等待循环结束再执行wait后面的内容<br>echo -e &quot;time-consuming: $SECONDS    seconds&quot;    #显示脚本执行耗时<br></code></pre></td></tr></table></figure><h2 id="压测脚本"><a href="#压测脚本" class="headerlink" title="压测脚本"></a>压测脚本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_">#</span><span class="language-bash">!/bin/bash</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">并发运行的最佳实践</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">总进程数</span><br>Sp=2500<br><span class="hljs-meta prompt_"># </span><span class="language-bash">并发数,并发数过大可能造成系统崩溃</span><br>Qp=250<br><span class="hljs-meta prompt_"># </span><span class="language-bash">存放进程的队列</span><br>Qarr=();<br><span class="hljs-meta prompt_"># </span><span class="language-bash">运行进程数</span><br>run=0<br><span class="hljs-meta prompt_"># </span><span class="language-bash">将进程的添加到队列里的函数</span><br>function push() &#123;<br>Qarr=($&#123;Qarr[@]&#125; $1)<br>run=$&#123;#Qarr[@]&#125;<br>&#125;<br><span class="hljs-meta prompt_"># </span><span class="language-bash">检测队列里的进程是否运行完毕</span><br>function check() &#123;<br>oldQ=($&#123;Qarr[@]&#125;)<br>Qarr=()<br>for p in &quot;$&#123;oldQ[@]&#125;&quot;;do<br>if [[ -d &quot;/proc/$p&quot; ]];then<br>Qarr=($&#123;Qarr[@]&#125; $p)<br>fi<br>done<br>run=$&#123;#Qarr[@]&#125;<br>&#125;<br><span class="hljs-meta prompt_"> # </span><span class="language-bash">main</span><br>for((i=0; i&lt;$Sp; i++));do<br><span class="hljs-meta prompt_">#</span><span class="language-bash"><span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> `<span class="hljs-built_in">seq</span> 500000`; <span class="hljs-keyword">do</span> curl -o /dev/null -s -w %&#123;http_code&#125;:%&#123;time_total&#125; http://www.baidu.com ;<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot; &quot;</span>; <span class="hljs-keyword">done</span></span><br>echo &quot;running $i &quot;<br>sleep 3 &amp;<br>push $!<br>while [[ $run -gt $Qp ]];do<br>check<br>sleep 0.1<br>done<br>done<br>echo -e &quot;time-consuming: $SECONDS seconds&quot; #显示脚本执行耗时<br></code></pre></td></tr></table></figure>]]></content>
    
    
    <categories>
      
      <category>Linux技术</category>
      
    </categories>
    
    
    <tags>
      
      <tag>压力测试</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
