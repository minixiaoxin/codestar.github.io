

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/mini%E5%B0%8F%E6%96%B0.png">
  <link rel="icon" href="/img/mini%E5%B0%8F%E6%96%B0.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="miniå°æ–°">
  <meta name="keywords" content="æ€»æœ‰ç€è®¸å¤šçš„æœªçŸ¥æ¥æ¢ç´¢ï¼Œé‚£éƒ½æ˜¯å­¦ä¸å®Œçš„...">
  
    <meta name="description" content="1ã€Promptè®¤è¯†1.1ã€PromptåŸºæœ¬æ¦‚å¿µå…³äºLLMå¤§æ¨¡å‹ï¼Œåœ¨å‰é¢å·²ç»æœ‰äº†äº†è§£ï¼Œç°åœ¨æ¥äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯promptã€‚åœ¨LLMå‘å±•æ—©æœŸï¼Œpromptæ˜¯ä¸€ä¸ªè¢«ç”¨æ¥ç»™LLMä¸‹å‘ä»»åŠ¡çš„æ¨¡æ¿ï¼Œæ¯ç§åˆ†ç±»ä»»åŠ¡æˆ–èšç±»ä»»åŠ¡å¯¹åº”ä¸€ç§promptï¼Œå½“ç„¶ä¸å±€é™äºæ­¤ã€‚éšç€LLMæŠ€æœ¯çš„å‘å±•ä»¥åŠChatGPTçš„è¯ç”Ÿï¼Œpromptå·²ç»æ³›æŒ‡ä¸ºç»™å¤§æ¨¡å‹çš„æ‰€æœ‰è¾“å…¥å†…å®¹ï¼Œä¸ä»…é™ä¸æ–‡å­—ã€‚æˆ‘ä»¬ä¸LLMçš„æ¯æ¬¡å¯¹è¯ï¼Œéƒ½å¯è§†ä¸ºä¸€ä¸ªprompt">
<meta property="og:type" content="article">
<meta property="og:title" content="LLMç¬”è®°2-1ï¼šPythonå®ç°å¤§æ¨¡å‹APIçš„è°ƒç”¨">
<meta property="og:url" content="http://www.codestar.top/2023/11/19/AI&ML/DatawhaleLearn/LLM%E7%AC%94%E8%AE%B02-1%EF%BC%9APython%E5%AE%9E%E7%8E%B0%E5%A4%A7%E6%A8%A1%E5%9E%8BAPI%E7%9A%84%E8%B0%83%E7%94%A8/index.html">
<meta property="og:site_name" content="miniå°æ–°çš„åšå®¢">
<meta property="og:description" content="1ã€Promptè®¤è¯†1.1ã€PromptåŸºæœ¬æ¦‚å¿µå…³äºLLMå¤§æ¨¡å‹ï¼Œåœ¨å‰é¢å·²ç»æœ‰äº†äº†è§£ï¼Œç°åœ¨æ¥äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯promptã€‚åœ¨LLMå‘å±•æ—©æœŸï¼Œpromptæ˜¯ä¸€ä¸ªè¢«ç”¨æ¥ç»™LLMä¸‹å‘ä»»åŠ¡çš„æ¨¡æ¿ï¼Œæ¯ç§åˆ†ç±»ä»»åŠ¡æˆ–èšç±»ä»»åŠ¡å¯¹åº”ä¸€ç§promptï¼Œå½“ç„¶ä¸å±€é™äºæ­¤ã€‚éšç€LLMæŠ€æœ¯çš„å‘å±•ä»¥åŠChatGPTçš„è¯ç”Ÿï¼Œpromptå·²ç»æ³›æŒ‡ä¸ºç»™å¤§æ¨¡å‹çš„æ‰€æœ‰è¾“å…¥å†…å®¹ï¼Œä¸ä»…é™ä¸æ–‡å­—ã€‚æˆ‘ä»¬ä¸LLMçš„æ¯æ¬¡å¯¹è¯ï¼Œéƒ½å¯è§†ä¸ºä¸€ä¸ªprompt">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://www.codestar.top/img/blog-img/AGI_pic1.png">
<meta property="article:published_time" content="2023-11-18T16:31:44.000Z">
<meta property="article:modified_time" content="2023-11-18T16:50:12.841Z">
<meta property="article:author" content="miniå°æ–°">
<meta property="article:tag" content="Datawhale">
<meta property="article:tag" content="LLM">
<meta property="article:tag" content="AI&amp;ML">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="http://www.codestar.top/img/blog-img/AGI_pic1.png">
  
  
    <meta name="referrer" content="no-referrer-when-downgrade">
  
  
  <title>LLMç¬”è®°2-1ï¼šPythonå®ç°å¤§æ¨¡å‹APIçš„è°ƒç”¨ - miniå°æ–°çš„åšå®¢</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_4300802_1dwux0cbyv6.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"www.codestar.top","root":"/","version":"1.9.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"shell"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"follow_dnt":true,"baidu":"a48e14d1d7805c8552eaa9824984945e","google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"Gxk1Sem8mKPN1DwNwHP3SsBG-MdYXbMMI","app_key":"wfFTsKm5TWsVNYYUHBugqEKu","server_url":null,"path":"window.location.pathname","ignore_local":true}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  

  
    <!-- Baidu Analytics -->
    <script async>
      if (!Fluid.ctx.dnt) {
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?a48e14d1d7805c8552eaa9824984945e";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
      }
    </script>
  

  
    <!-- Google tag (gtag.js) -->
    <script async>
      if (!Fluid.ctx.dnt) {
        Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=", function() {
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
          gtag('js', new Date());
          gtag('config', '');
        });
      }
    </script>
  

  

  

  

  
    
  



  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>miniå°æ–°</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                <span>é¦–é¡µ</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-icon_books"></i>
                <span>æ–‡ç« </span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/archives/">
                    <i class="iconfont icon-archive-fill"></i>
                    <span>å½’æ¡£</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/categories/">
                    <i class="iconfont icon-category-fill"></i>
                    <span>åˆ†ç±»</span>
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" href="/tags/">
                    <i class="iconfont icon-tags-fill"></i>
                    <span>æ ‡ç­¾</span>
                  </a>
                
              </div>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-user-fill"></i>
                <span>ä¸ªäºº</span>
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" href="/about/">
                    <i class="iconfont icon-info"></i>
                    <span>å…³äº</span>
                  </a>
                
              </div>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/wall-1.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="LLMç¬”è®°2-1ï¼šPythonå®ç°å¤§æ¨¡å‹APIçš„è°ƒç”¨"></span>
          
        </div>

        
          
  <div class="mt-3">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-author" aria-hidden="true"></i>
        miniå°æ–°
      </span>
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2023-11-19 00:31" pubdate>
          2023å¹´11æœˆ19æ—¥ å‡Œæ™¨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          13k å­—
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          111 åˆ†é’Ÿ
        
      </span>
    

    
    
      
        <span id="busuanzi_container_page_pv" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          <span id="busuanzi_value_page_pv"></span> æ¬¡
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">LLMç¬”è®°2-1ï¼šPythonå®ç°å¤§æ¨¡å‹APIçš„è°ƒç”¨</h1>
            
              <p class="note note-info">
                
                  
                    æœ¬æ–‡æœ€åæ›´æ–°äºï¼š2023å¹´11æœˆ19æ—¥ å‡Œæ™¨
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <h2 id="1ã€Promptè®¤è¯†"><a href="#1ã€Promptè®¤è¯†" class="headerlink" title="1ã€Promptè®¤è¯†"></a>1ã€Promptè®¤è¯†</h2><h3 id="1-1ã€PromptåŸºæœ¬æ¦‚å¿µ"><a href="#1-1ã€PromptåŸºæœ¬æ¦‚å¿µ" class="headerlink" title="1.1ã€PromptåŸºæœ¬æ¦‚å¿µ"></a>1.1ã€PromptåŸºæœ¬æ¦‚å¿µ</h3><p>å…³äºLLMå¤§æ¨¡å‹ï¼Œåœ¨å‰é¢å·²ç»æœ‰äº†äº†è§£ï¼Œç°åœ¨æ¥äº†è§£ä¸€ä¸‹ä»€ä¹ˆæ˜¯promptã€‚åœ¨LLMå‘å±•æ—©æœŸï¼Œpromptæ˜¯ä¸€ä¸ªè¢«ç”¨æ¥ç»™LLMä¸‹å‘ä»»åŠ¡çš„æ¨¡æ¿ï¼Œæ¯ç§åˆ†ç±»ä»»åŠ¡æˆ–èšç±»ä»»åŠ¡å¯¹åº”ä¸€ç§promptï¼Œå½“ç„¶ä¸å±€é™äºæ­¤ã€‚éšç€LLMæŠ€æœ¯çš„å‘å±•ä»¥åŠChatGPTçš„è¯ç”Ÿï¼Œpromptå·²ç»æ³›æŒ‡ä¸ºç»™å¤§æ¨¡å‹çš„æ‰€æœ‰è¾“å…¥å†…å®¹ï¼Œä¸ä»…é™ä¸æ–‡å­—ã€‚æˆ‘ä»¬ä¸LLMçš„æ¯æ¬¡å¯¹è¯ï¼Œéƒ½å¯è§†ä¸ºä¸€ä¸ªpromptï¼Œè€Œç»è¿‡LLMè¾“å‡ºçš„ç»“æœï¼Œç§°å…¶ä¸º<strong>Completion</strong>ã€‚ç®€å•ç‚¹ç†è§£ï¼Œè¾“å…¥å³ä¸ºpromptï¼Œè¾“å‡ºå³ä¸ºcompletionã€‚</p>
<p><img src="https://codestar.top/note-image/image-20231118102533309.png" srcset="/img/loading.gif" lazyload alt="image-20231118102533309"></p>
<h3 id="1-2ã€Promptä¸­çš„å¸¸ç”¨å‚æ•°"><a href="#1-2ã€Promptä¸­çš„å¸¸ç”¨å‚æ•°" class="headerlink" title="1.2ã€Promptä¸­çš„å¸¸ç”¨å‚æ•°"></a>1.2ã€Promptä¸­çš„å¸¸ç”¨å‚æ•°</h3><ul>
<li><p><strong>Temperatureï¼š</strong>ç”Ÿæˆç»“æœçš„éšæœºæ€§</p>
<blockquote>
<p>å‚æ•°èŒƒå›´ï¼š[0 ,1]</p>
</blockquote>
</li>
</ul>
<blockquote>
<p>å½“temperature &#x3D; 0æ—¶ï¼ŒLLMçš„åˆ›é€ æ€§æœ€ä½ï¼Œç”Ÿæˆçš„ç»“æœæ›´åŠ çš„<strong>ä¿å®ˆ</strong>ï¼Œå¯é¢„æµ‹ï¼Œé€‚ç”¨äºä¸€äº›å¯¹ç»“æœå‡†ç¡®åº¦æˆ–æ ¼å¼è¦æ±‚å¾ˆé«˜çš„åœºæ™¯ã€‚</p>
<p>å½“temperature &#x3D; 1æ—¶ï¼ŒLLMçš„åˆ›é€ æ€§æœ€é«˜ï¼Œç”Ÿæˆçš„ç»“æœæ›´åŠ çš„<strong>éšæœº</strong>ï¼Œéš¾ä»¥é¢„æµ‹ï¼Œé€‚ç”¨äºä¸€äº›æ›´éœ€è¦åˆ›é€ åŠ›çš„åœºæ™¯ï¼Œå¦‚å†™ä½œï¼Œè®¾è®¡ç­‰ã€‚</p>
</blockquote>
<ul>
<li><p><strong>system promptï¼š</strong></p>
<blockquote>
<p><strong>promptä¸­ä¼˜å…ˆçº§æ›´é«˜çš„ä¸€ç§promptï¼Œåœ¨ä¸€æ¬¡å®Œæ•´çš„å¯¹è¯ä¸­ï¼Œåªä¼šç”Ÿæ•ˆä¸€ä¸ª system prompt</strong>ï¼Œå¦‚æœä¸€ä¸ªå¯¹è¯ä¸­å‡ºç°ä¸¤ä¸ªsystem promptï¼Œåˆ™ç”Ÿæ•ˆçš„ä¸ºåè€…ã€‚system promptçš„çš„ä¸»è¦ä½œç”¨æ˜¯æå‰è®¾å®šå¥½LLMæ‰€æ‰®æ¼”çš„è§’è‰²æˆ–è€…é¢„å…ˆçš„æ¡ä»¶ï¼Œè¿™æ ·åœ¨åç»­çš„è¾“å…¥ä¸­èƒ½å¤ŸæŒ‰ç…§è¿™ä¸ªè¦æ±‚æ¥ç»™å‡ºæ›´å‡†ç¡®æˆ–æ›´å¥‘åˆåœºæ™¯çš„å›ç­”ã€‚æ•ˆæœä¸»è¦æ˜¯ç”¨æ¥æå‡ç”¨ä¾‹ä½“éªŒï¼ŒChatGPT APIå¼€æ”¾åè¿™æ¦‚å¿µè¢«å¤§é‡æ¨å¹¿ã€‚ä¸å¾—ä¸è¯´ï¼Œæ•ˆæœå¾ˆå¥½ã€‚</p>
</blockquote>
</li>
</ul>
<p>ä½¿ç”¨ç¤ºä¾‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell">&#123;<br>    &quot;system prompt&quot;:&quot;æˆ‘æƒ³è®©ä½ å……å½“ä¸€ä¸ªèŠ±å“¨çš„æ ‡é¢˜ç”Ÿæˆå™¨ã€‚æˆ‘ä¼šç”¨é€—å·è¾“å…¥å…³é”®å­—ï¼Œä½ ä¼šç”¨èŠ±å“¨çš„æ ‡é¢˜å›å¤ã€‚æˆ‘çš„ç¬¬ä¸€ä¸ªå…³é”®å­—æ˜¯ apiã€testã€automation&quot;,<br>    &quot;user prompt&quot;:&quot;ä»Šæ—¥å¤©æ°”ï¼Œå¾ˆé“&quot;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ•ˆæœï¼Œç¡®å®ä¼šç”ŸæˆèŠ±é‡Œèƒ¡å“¨çš„æ ‡é¢˜<img src="https://codestar.top/note-image/0BC47B01.png" srcset="/img/loading.gif" lazyload alt="0BC47B01">ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118104713638.png" srcset="/img/loading.gif" lazyload alt="image-20231118104713638"></p>
<p><strong>æ³¨ï¼š</strong>è¿™é‡Œæ‰€æ”¯æŒçš„è§’è‰²å¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ³æ³•æ¥è®¾å®šï¼Œå®ƒæ‰€èƒ½åšçš„èƒ½åŠ›èŒƒå›´æœ‰å¤šå¤§ï¼Œå…¨é ä½ æƒ³åƒæœ‰å¤šå¤§ï¼Œèƒ½åŠ›ä¸æ˜¯æ— é™å¤§ï¼Œ<strong>åœ¨å…è®¸èŒƒå›´å†…å°è¯•</strong></p>
<ul>
<li><p><strong>user promptï¼š</strong></p>
<blockquote>
<p>promptä¸­çš„å¦ä¸€ç§ï¼šuser promptï¼Œç­‰ä»·äºæˆ‘ä»¬æ­£å¸¸çš„è¾“å…¥ï¼Œå®ƒçš„ä¼˜å…ˆçº§ä¼šæ¯”system promptä¼˜å…ˆçº§æ›´ä½ï¼Œå¦‚ä¸Šè¿°çš„ç¤ºä¾‹ï¼Œå…¶ä¸­â€ä»Šæ—¥å¤©æ°”ï¼Œå¾ˆé“â€ä¾¿æ˜¯ä¸€ä¸ªuser promptã€‚åŒºåˆ«åœ¨äºï¼Œæˆ‘ä»¬åœ¨ä¸€æ®µå®Œæ•´å¯¹è¯ä¸­ï¼Œå¯ä»¥è¿­ä»£å¾ˆå¤šä¸ªuser promptï¼Œä½†system promptåªèƒ½æœ‰ä¸€ä¸ªã€‚</p>
</blockquote>
</li>
</ul>
<h2 id="2ã€ç¯å¢ƒå‡†å¤‡"><a href="#2ã€ç¯å¢ƒå‡†å¤‡" class="headerlink" title="2ã€ç¯å¢ƒå‡†å¤‡"></a>2ã€ç¯å¢ƒå‡†å¤‡</h2><h3 id="2-1ã€Anacondaå®‰è£…"><a href="#2-1ã€Anacondaå®‰è£…" class="headerlink" title="2.1ã€Anacondaå®‰è£…"></a>2.1ã€Anacondaå®‰è£…</h3><p><a target="_blank" rel="noopener" href="https://www.anaconda.com/download">Anacondaå®˜ç½‘</a>ä¸‹è½½å®‰è£…åŒ…ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118131922857.png" srcset="/img/loading.gif" lazyload alt="image-20231118131922857"></p>
<p>ä¹‹ååŒå‡»å®‰è£…ç¨‹åºï¼Œä¿®æ”¹å®‰è£…è·¯å¾„ä¹‹åæŒ‰ç…§æ¨èè®¾å®šå®‰è£…å³å¯ï¼Œæ­¤å¤„ä¸è¯¦è¿°ã€‚</p>
<p>å®‰è£…å®Œæˆåï¼Œå°†anacondaä¸­çš„Pythoné…ç½®åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡<code>path</code>ä¸­ï¼šæ·»åŠ ä¸¤æ¡ç¯å¢ƒå˜é‡è·¯å¾„å¦‚ä¸‹ï¼Œ<code>D:\Anaconda</code>ä¸ºæˆ‘æœ¬åœ°å®‰è£…çš„è·¯å¾„</p>
<p><img src="https://codestar.top/note-image/image-20231118140057806.png" srcset="/img/loading.gif" lazyload alt="image-20231118140057806"></p>
<h3 id="2-2ã€å·¥å…·pip-searchå®‰è£…"><a href="#2-2ã€å·¥å…·pip-searchå®‰è£…" class="headerlink" title="2.2ã€å·¥å…·pip-searchå®‰è£…"></a>2.2ã€å·¥å…·pip-searchå®‰è£…</h3><p>pip-searchå¯ä»¥ç”¨æ¥æŸ¥æ‰¾æŒ‡å®šçš„åŒ…ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs shell">pip install pip-search -i https://pypi.tuna.tsinghua.edu.cn/simple/<br><span class="hljs-meta prompt_"># </span><span class="language-bash">æœç´¢æŒ‡å®šåŒ…</span><br>pip_search numpy<br><span class="hljs-meta prompt_"># </span><span class="language-bash">æŸ¥çœ‹å¯å®‰è£…åŒ…ç‰ˆæœ¬</span><br>pip index vesions numpy<br></code></pre></td></tr></table></figure>


<h3 id="2-3ã€pipå¿…è¦åº“å®‰è£…ï¼ˆWindowsï¼‰"><a href="#2-3ã€pipå¿…è¦åº“å®‰è£…ï¼ˆWindowsï¼‰" class="headerlink" title="2.3ã€pipå¿…è¦åº“å®‰è£…ï¼ˆWindowsï¼‰"></a>2.3ã€pipå¿…è¦åº“å®‰è£…ï¼ˆWindowsï¼‰</h3><p>è·å–åº“ä¾èµ–æ–‡ä»¶ï¼š<a target="_blank" rel="noopener" href="https://github.com/datawhalechina/llm-universe">https://github.com/datawhalechina/llm-universe</a></p>
<p>åœ¨ä»“åº“æ ¹è·¯å¾„ä¸‹æ‰§è¡Œï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å…ˆ<span class="hljs-built_in">cd</span>åˆ°ä»“åº“æ ¹è·¯å¾„</span><br>pip install -r .\requirements_windows.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/<br><span class="hljs-meta prompt_"># </span><span class="language-bash">è¿™é‡Œå¯èƒ½ä¼šæ¶‰åŠåˆ°ä¿®æ”¹pipçš„æƒ…å†µï¼Œä½¿ç”¨Pythonè¿›è¡Œå®‰è£…</span><br>D:\Anaconda\python.exe -m pip install -r .\requirements_windows.txt -i https://pypi.tuna.tsinghua.edu.cn/simple/<br></code></pre></td></tr></table></figure>

<p>æ­£å¸¸æ‰§è¡Œå¦‚ä¸‹ï¼šè¿™é‡Œæˆ‘æ›´æ”¹ä¸ºäº†å›½å†…çš„æ¸…åpipæºé•œåƒä¸‹è½½</p>
<p><img src="https://codestar.top/note-image/image-20231118140655233.png" srcset="/img/loading.gif" lazyload alt="image-20231118140655233"></p>
<p>æ¥ä¸‹æ¥å°±æ˜¯ç­‰å¾…å…¶å®‰è£…å¥½ï¼Œå¤§çº¦éœ€è¦2-3åˆ†é’Ÿå·¦å³ã€‚</p>
<p>æ­£å¸¸æƒ…å†µä¸ä¼šå‡ºç°å…¶ä»–æŠ¥é”™ä¼šç›´æ¥å®‰è£…æˆåŠŸï¼Œå¦‚ä¸‹ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118141525471.png" srcset="/img/loading.gif" lazyload alt="image-20231118141525471"></p>
<p>æˆ‘è¿™è¾¹å®‰è£…å‡ºç°äº†ä¸€äº›å…¼å®¹æ€§æˆ–ç¼ºåŒ…é—®é¢˜ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs shell">ERROR: pip&#x27;s dependency resolver does not currently take into account all the packages that are installed. This behaviour is the source of the following dependency conflicts.<br>gensim 4.3.0 requires FuzzyTM&gt;=0.4.0, which is not installed.<br>tables 3.8.0 requires blosc2~=2.0.0, which is not installed.<br>tables 3.8.0 requires cython&gt;=0.29.21, which is not installed.<br>anaconda-cloud-auth 0.1.3 requires pydantic&lt;2.0, but you have pydantic 2.5.1 which is incompatible.<br>numba 0.57.1 requires numpy&lt;1.25,&gt;=1.21, but you have numpy 1.26.2 which is incompatible.<br></code></pre></td></tr></table></figure>

<p><img src="https://codestar.top/note-image/image-20231118141441651.png" srcset="/img/loading.gif" lazyload alt="image-20231118141441651"></p>
<p>é€ä¸ªè§£å†³ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">1ã€ç¼ºå¤±FuzzyTM&gt;=0.4.0</span><br>pip install FuzzyTM -i https://pypi.tuna.tsinghua.edu.cn/simple/<br><span class="hljs-meta prompt_"># </span><span class="language-bash">2ã€ç¼ºå¤±blosc2~=2.0.0:æŒ‡å®šä¸‹è½½2.0.0ç‰ˆæœ¬blosc2ï¼ˆå…ˆæ‰§è¡Œ3ï¼Œå†æ‰§è¡Œè¿™ä¸€æ­¥ï¼‰</span><br>pip install blosc2==2.0.0 -i https://pypi.tuna.tsinghua.edu.cn/simple/<br><span class="hljs-meta prompt_"># </span><span class="language-bash">3ã€ç¼ºå¤±cython&gt;=0.29.21</span><br>pip install cython -i https://pypi.tuna.tsinghua.edu.cn/simple/<br><span class="hljs-meta prompt_"># </span><span class="language-bash"><span class="hljs-comment"># 4ã€è¦æ±‚pydantic&lt;2.0ï¼šå®‰è£…1.10.3ç‰ˆæœ¬--æš‚ä¸å¤„ç†ï¼Œä¸å½±å“</span></span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">pip install pydantic==1.10.3 -i https://pypi.tuna.tsinghua.edu.cn/simple/</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">5ã€è¦æ±‚numpy&lt;1.25,&gt;=1.21</span><br><span class="hljs-meta prompt_"># </span><span class="language-bash">æ£€æŸ¥å®‰è£…çš„ç‰ˆæœ¬ï¼Œä¸æ»¡è¶³åˆ™ä»¿ç…§æ­¥éª¤2ï¼ŒæŒ‡å®šç‰ˆæœ¬é‡æ–°å®‰è£…ï¼Œpip index versions numpyæŸ¥çœ‹å¯å®‰è£…çš„ç‰ˆæœ¬</span><br>pip show numpy<br>pip install numba -i https://pypi.tuna.tsinghua.edu.cn/simple/<br></code></pre></td></tr></table></figure>

<p>FuzzyTMå®‰è£…ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118142225393.png" srcset="/img/loading.gif" lazyload alt="image-20231118142225393"></p>
<p>cythonå®‰è£…ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118142559351.png" srcset="/img/loading.gif" lazyload alt="image-20231118142559351"></p>
<p>blosc2 2.0.0ç‰ˆæœ¬å®‰è£…ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118142708681.png" srcset="/img/loading.gif" lazyload alt="image-20231118142708681"></p>
<p>pydanticåº“å½±å“çš„æ˜¯anaconda-cloud-auth 0.1.3ï¼Œanacondaäº‘æˆæƒåº“ï¼Œå¯é€‰çš„åº“æœ‰ä¸‹é¢è¿™äº›ï¼šï¼ˆ1.10.13å®‰è£…åä¼šå‡ºç°ä¸æ»¡è¶³gradioåº“çš„ç°è±¡ï¼Œæš‚ä¸å¤„ç†ï¼Œä¸å½±å“åç»­ä»£ç è¿è¡Œï¼‰</p>
<p><img src="https://codestar.top/note-image/image-20231118143403139.png" srcset="/img/loading.gif" lazyload alt="image-20231118143403139"></p>
<p>numbaå®‰è£…ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118150041170.png" srcset="/img/loading.gif" lazyload alt="image-20231118150041170"></p>
<p><img src="https://codestar.top/note-image/image-20231118150103390.png" srcset="/img/loading.gif" lazyload alt="image-20231118150103390"></p>
<h3 id="2-4ã€pycharmåˆ›å»ºé¡¹ç›®"><a href="#2-4ã€pycharmåˆ›å»ºé¡¹ç›®" class="headerlink" title="2.4ã€pycharmåˆ›å»ºé¡¹ç›®"></a>2.4ã€pycharmåˆ›å»ºé¡¹ç›®</h3><p>æ‰“å¼€pycharmï¼ŒNEW PROJECTï¼Œå¡«å†™é¡¹ç›®åŸºæœ¬ä¿¡æ¯ï¼Œé€‰å–æœ¬åœ°å®‰è£…çš„Anacondaä¸­çš„Pythonï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118134134734.png" srcset="/img/loading.gif" lazyload alt="image-20231118134134734"></p>
<h2 id="3ã€LLM-APIçš„ä½¿ç”¨"><a href="#3ã€LLM-APIçš„ä½¿ç”¨" class="headerlink" title="3ã€LLM APIçš„ä½¿ç”¨"></a>3ã€LLM APIçš„ä½¿ç”¨</h2><h3 id="3-1ã€ChatGPT-APIè°ƒç”¨"><a href="#3-1ã€ChatGPT-APIè°ƒç”¨" class="headerlink" title="3.1ã€ChatGPT APIè°ƒç”¨"></a>3.1ã€ChatGPT APIè°ƒç”¨</h3><h4 id="1ï¼‰OpenAI-keyç”Ÿæˆ"><a href="#1ï¼‰OpenAI-keyç”Ÿæˆ" class="headerlink" title="1ï¼‰OpenAI keyç”Ÿæˆ"></a>1ï¼‰OpenAI keyç”Ÿæˆ</h4><p>è¿›å…¥Overviewé¡µé¢ï¼š<a target="_blank" rel="noopener" href="https://platform.openai.com/docs/overview">https://platform.openai.com/docs/overview</a></p>
<p><img src="https://codestar.top/note-image/image-20231118110129691.png" srcset="/img/loading.gif" lazyload alt="image-20231118110129691"></p>
<p>å¡«å†™keyåç§°ï¼Œç‚¹å‡»<code>Create secret key</code>ä¹‹åç”Ÿæˆç›¸åº”çš„å¯†é’¥ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118110203297.png" srcset="/img/loading.gif" lazyload alt="image-20231118110203297"></p>
<p>ç”Ÿæˆåï¼Œæ‹·è´ç”Ÿæˆçš„å¯†é’¥ï¼Œä¿å­˜å¥½å¯†é’¥ï¼Œåé¢ä¼šä½¿ç”¨åˆ°å®ƒï¼Œ<strong>æ³¨æ„å¯†é’¥åªä¼šå±•ç¤º1æ¬¡ï¼Œå…³é—­å¼¹çª—ä¹‹åä¸ä¼šå†æ˜¾ç¤º</strong>ã€‚ç”ŸæˆæˆåŠŸä¹‹åä¼šåœ¨API keysé¡µé¢ä¸Šå±•ç¤ºåˆšæ‰æ–°å»ºçš„keyã€‚ä¸€ä¸ª<strong>å…è´¹è´¦å·å¯†é’¥ç”¨é‡æœ‰æ•ˆæœŸåœ¨3ä¸ªæœˆ</strong>ï¼Œè¶…è¿‡è¿™æ®µæ—¶é—´åˆ™æ— æ•ˆã€‚</p>
<h4 id="2ï¼‰é…ç½®è¯»å–key"><a href="#2ï¼‰é…ç½®è¯»å–key" class="headerlink" title="2ï¼‰é…ç½®è¯»å–key"></a>2ï¼‰é…ç½®è¯»å–key</h4><p>åœ¨é¡¹ç›®æ ¹è·¯å¾„ï¼Œåˆ›å»º<code>.env</code>æ–‡ä»¶ä¿å­˜æˆ‘ä»¬çš„key</p>
<p><img src="https://codestar.top/note-image/image-20231118171518004.png" srcset="/img/loading.gif" lazyload alt="image-20231118171518004"></p>
<p>é€šè¿‡ä¸‹é¢çš„ä»£ç æ¥è¯»å–<code>.env</code>ä¸­çš„keyå€¼ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># file:obtain_key.py</span><br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">import</span> openai<br><span class="hljs-keyword">from</span> dotenv <span class="hljs-keyword">import</span> load_dotenv, find_dotenv<br><br><span class="hljs-comment"># å°è£…æˆget_dotenv()å‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_dotenv</span>():<br>    <span class="hljs-comment"># è¯»å–æœ¬åœ°/é¡¹ç›®çš„ç¯å¢ƒå˜é‡ã€‚</span><br>    <span class="hljs-comment"># find_dotenv()å¯»æ‰¾å¹¶å®šä½.envæ–‡ä»¶çš„è·¯å¾„</span><br>    <span class="hljs-comment"># load_dotenv()è¯»å–è¯¥.envæ–‡ä»¶ï¼Œå¹¶å°†å…¶ä¸­çš„ç¯å¢ƒå˜é‡åŠ è½½åˆ°å½“å‰çš„è¿è¡Œç¯å¢ƒä¸­</span><br>    <span class="hljs-comment"># å¦‚æœä½ è®¾ç½®çš„æ˜¯å…¨å±€çš„ç¯å¢ƒå˜é‡ï¼Œè¿™è¡Œä»£ç åˆ™æ²¡æœ‰ä»»ä½•ä½œç”¨ã€‚</span><br>    _ = load_dotenv(find_dotenv())<br><br>    <span class="hljs-comment"># å¦‚æœä½ éœ€è¦é€šè¿‡ä»£ç†ç«¯å£è®¿é—®ï¼Œä½ éœ€è¦å¦‚ä¸‹é…ç½®ï¼šæ³¨æ„ç«¯å£æ˜¯å¦æ­£ç¡®</span><br>    os.environ[<span class="hljs-string">&#x27;HTTPS_PROXY&#x27;</span>] = <span class="hljs-string">&#x27;http://127.0.0.1:9981&#x27;</span><br>    os.environ[<span class="hljs-string">&quot;HTTP_PROXY&quot;</span>] = <span class="hljs-string">&#x27;http://127.0.0.1:9981&#x27;</span><br><br>    <span class="hljs-comment"># è·å–ç¯å¢ƒå˜é‡ OPENAI_API_KEY</span><br>    <span class="hljs-comment"># openai.api_key = os.environ[&#x27;OPENAI_API_KEY&#x27;]</span><br>    openai.api_key = os.getenv(<span class="hljs-string">&#x27;OPENAI_API_KEY&#x27;</span>)<br>    <span class="hljs-built_in">print</span>(openai.api_key)<br>    <span class="hljs-comment"># print(type(openai.api_key))</span><br>    <span class="hljs-keyword">return</span> os.getenv(<span class="hljs-string">&#x27;OPENAI_API_KEY&#x27;</span>)<br></code></pre></td></tr></table></figure>

<h4 id="3ï¼‰ChatGPTåŸç”Ÿæ¥å£è°ƒç”¨"><a href="#3ï¼‰ChatGPTåŸç”Ÿæ¥å£è°ƒç”¨" class="headerlink" title="3ï¼‰ChatGPTåŸç”Ÿæ¥å£è°ƒç”¨"></a>3ï¼‰ChatGPTåŸç”Ÿæ¥å£è°ƒç”¨</h4><p>è·å–åˆ°OpenAIå®˜æ–¹çš„keyä¹‹åï¼Œæˆ‘ä»¬æ¥å°è¯•è°ƒç”¨ChatGPTï¼Œå‚è€ƒ<a target="_blank" rel="noopener" href="https://platform.openai.com/docs/api-reference/chat/object">å®˜æ–¹æ–‡æ¡£</a>ã€‚ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> openai<br><span class="hljs-keyword">from</span> obtain_key <span class="hljs-keyword">import</span> get_dotenv<br><br><br>get_dotenv()<br><span class="hljs-comment"># å¯¼å…¥æ‰€éœ€åº“</span><br><span class="hljs-comment"># æ³¨æ„ï¼Œæ­¤å¤„æˆ‘ä»¬å‡è®¾ä½ å·²æ ¹æ®ä¸Šæ–‡é…ç½®äº† OpenAI API Keyï¼Œå¦‚æ²¡æœ‰å°†è®¿é—®å¤±è´¥</span><br>completion = openai.ChatCompletion.create(<br>    <span class="hljs-comment"># åˆ›å»ºä¸€ä¸ª ChatCompletion</span><br>    <span class="hljs-comment"># è°ƒç”¨æ¨¡å‹ï¼šChatGPT-3.5</span><br>    model=<span class="hljs-string">&quot;gpt-3.5-turbo&quot;</span>,<br>    <span class="hljs-comment"># message æ˜¯ä½ çš„ prompt</span><br>    messages=[<br>        &#123;<span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;system&quot;</span>, <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-string">&quot;You are a helpful assistant.&quot;</span>&#125;,<br>        &#123;<span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-string">&quot;Hello!&quot;</span>&#125;<br>    ]<br>)<br><span class="hljs-built_in">print</span>(completion[<span class="hljs-string">&quot;choices&quot;</span>][<span class="hljs-number">0</span>][<span class="hljs-string">&quot;message&quot;</span>][<span class="hljs-string">&quot;content&quot;</span>])<br></code></pre></td></tr></table></figure>

<p>æ¥å£ä¼šè¿”å›ä¸€ä¸ªChatCompletionå¯¹è±¡ï¼ŒåŒ…å«äº†å›ç­”æ–‡æœ¬ï¼Œåˆ›å»ºæ—¶é—´ç­‰å±æ€§å†…å®¹ï¼Œæˆ‘ä»¬ä»…éœ€è¦contentå±æ€§å†…å®¹ï¼Œè¿”å›ç¤ºä¾‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs shell"><span class="hljs-meta prompt_"># </span><span class="language-bash">å®Œæ•´çš„ChatCompletionå¯¹è±¡</span><br>&lt;OpenAIObject chat.completion id=chatcmpl-80QUFny7lXqOcfu5CZMRYhgXqUCv0 at 0x7f1fbc0bd770&gt; JSON: &#123;<br>  &quot;choices&quot;: [<br>    &#123;<br>      &quot;finish_reason&quot;: &quot;stop&quot;,<br>      &quot;index&quot;: 0,<br>      &quot;message&quot;: &#123;<br>        &quot;content&quot;: &quot;Hello! How can I assist you today?&quot;,<br>        &quot;role&quot;: &quot;assistant&quot;<br>      &#125;<br>    &#125;<br>  ],<br>  &quot;created&quot;: 1695112507,<br>  &quot;id&quot;: &quot;chatcmpl-80QUFny7lXqOcfu5CZMRYhgXqUCv0&quot;,<br>  &quot;model&quot;: &quot;gpt-3.5-turbo-0613&quot;,<br>  &quot;object&quot;: &quot;chat.completion&quot;,<br>  &quot;usage&quot;: &#123;<br>    &quot;completion_tokens&quot;: 9,<br>    &quot;prompt_tokens&quot;: 19,<br>    &quot;total_tokens&quot;: 28<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>

<p><img src="https://codestar.top/note-image/image-20231118194351466.png" srcset="/img/loading.gif" lazyload alt="image-20231118194351466"></p>
<h4 id="4ï¼‰å°è£…è¯·æ±‚APIå‡½æ•°"><a href="#4ï¼‰å°è£…è¯·æ±‚APIå‡½æ•°" class="headerlink" title="4ï¼‰å°è£…è¯·æ±‚APIå‡½æ•°"></a>4ï¼‰å°è£…è¯·æ±‚APIå‡½æ•°</h4><p>å°†APIçš„è°ƒç”¨è¿›è¡Œå°è£…ï¼šéšå»äº†messageçš„å…·ä½“ç»†èŠ‚ï¼Œå¹¶å°†æ¨¡å‹å›ºå®šï¼Œç”¨æˆ·åªéœ€è¦ä¼ å…¥promptå³user promptçš„å†…å®¹å°±è¡Œ</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># ä¸€ä¸ªå°è£… OpenAI æ¥å£çš„å‡½æ•°ï¼Œå‚æ•°ä¸º Promptï¼Œè¿”å›å¯¹åº”ç»“æœ</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_completion</span>(<span class="hljs-params">prompt, model=<span class="hljs-string">&quot;gpt-3.5-turbo&quot;</span>, temperature = <span class="hljs-number">0</span></span>):<br>    <span class="hljs-string">&#x27;&#x27;&#x27;</span><br><span class="hljs-string">    è°ƒç”¨CHATGPT</span><br><span class="hljs-string">    prompt: å¯¹åº”çš„æç¤ºè¯</span><br><span class="hljs-string">    model: è°ƒç”¨çš„æ¨¡å‹ï¼Œé»˜è®¤ä¸º gpt-3.5-turbo(ChatGPT)ï¼Œæœ‰å†…æµ‹èµ„æ ¼çš„ç”¨æˆ·å¯ä»¥é€‰æ‹© gpt-4</span><br><span class="hljs-string">    &#x27;&#x27;&#x27;</span><br>    messages = [&#123;<span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-string">&quot;content&quot;</span>: prompt&#125;, &#123;<span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;system&quot;</span>, <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-string">&quot;You are a joyful assistant.&quot;</span>&#125;]<br>    response = openai.ChatCompletion.create(<br>        model=model,<br>        messages=messages,<br>        temperature=temperature, <span class="hljs-comment"># æ¨¡å‹è¾“å‡ºçš„æ¸©åº¦ç³»æ•°ï¼Œæ§åˆ¶è¾“å‡ºçš„éšæœºç¨‹åº¦</span><br>    )<br>    <span class="hljs-comment"># è°ƒç”¨ OpenAI çš„ ChatCompletion æ¥å£</span><br>    <span class="hljs-keyword">return</span> response.choices[<span class="hljs-number">0</span>].message[<span class="hljs-string">&quot;content&quot;</span>]<br></code></pre></td></tr></table></figure>

<p>è°ƒç”¨æ¥å£å¦‚ä¸‹ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># è°ƒç”¨get_completion()æ–¹æ³•</span><br>completion = get_completion(<span class="hljs-string">&quot;ä»‹ç»ä¸€ä¸‹å¹¿ä¸œè¿™ä¸ªçœ&quot;</span>)<br><span class="hljs-built_in">print</span>(completion)<br></code></pre></td></tr></table></figure>

<p><img src="https://codestar.top/note-image/image-20231118200354830.png" srcset="/img/loading.gif" lazyload alt="image-20231118200354830"></p>
<h4 id="5ï¼‰ä½¿ç”¨LangChainè°ƒç”¨ChatGPT"><a href="#5ï¼‰ä½¿ç”¨LangChainè°ƒç”¨ChatGPT" class="headerlink" title="5ï¼‰ä½¿ç”¨LangChainè°ƒç”¨ChatGPT"></a>5ï¼‰ä½¿ç”¨LangChainè°ƒç”¨ChatGPT</h4><p>LangChainä¸­å·²ç»å¯¹ChatGPTè¿›è¡Œå°è£…ï¼Œå¯ä»¥ç›´æ¥åœ¨åº”ç”¨ä¸­è°ƒç”¨ã€‚æ›´å¤šç»†èŠ‚ï¼Œå‚è€ƒ<a target="_blank" rel="noopener" href="https://api.python.langchain.com/en/latest/api_reference.html#module-langchain.chat_models">LangChainå®˜æ–¹æ–‡æ¡£</a></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">langchain è°ƒç”¨ chatgpt</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-comment"># ä»langchain.chat_modelså¯¼å…¥OpenAIçš„å¯¹è¯æ¨¡å‹ChatOpenAI</span><br><span class="hljs-keyword">from</span> langchain.chat_models <span class="hljs-keyword">import</span> ChatOpenAI<br><span class="hljs-keyword">import</span> os<br><span class="hljs-keyword">from</span> obtain_key <span class="hljs-keyword">import</span> get_dotenv<br>key = get_dotenv()<br><span class="hljs-built_in">print</span>(key)<br><span class="hljs-comment"># å®ä¾‹åŒ–ChatOpenAI ç±»</span><br><span class="hljs-comment"># è¿™é‡Œæˆ‘ä»¬å°†å‚æ•°temperatureè®¾ç½®ä¸º0.0ï¼Œä»è€Œå‡å°‘ç”Ÿæˆç­”æ¡ˆçš„éšæœºæ€§ã€‚</span><br><span class="hljs-comment"># å¦‚æœä½ æƒ³è¦æ¯æ¬¡å¾—åˆ°ä¸ä¸€æ ·çš„æœ‰æ–°æ„çš„ç­”æ¡ˆï¼Œå¯ä»¥å°è¯•è°ƒæ•´è¯¥å‚æ•°ã€‚</span><br>chat = ChatOpenAI(temperature=<span class="hljs-number">0.0</span>, openai_api_key=key)<br><span class="hljs-built_in">print</span>(chat)<br></code></pre></td></tr></table></figure>

<p>æ­£å¸¸è¿”å›å¦‚ä¸‹ï¼š</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs shell">cache=None verbose=False callbacks=None callback_manager=None tags=None metadata=None client=&lt;class &#x27;openai.api_resources.chat_completion.ChatCompletion&#x27;&gt; model_name=&#x27;gpt-3.5-turbo&#x27; temperature=0.0 model_kwargs=&#123;&#125; openai_api_key=&#x27;OPENAI_API_KEY&#x27; openai_api_base=&#x27;&#x27; openai_organization=&#x27;&#x27; openai_proxy=&#x27;&#x27; request_timeout=None max_retries=6 streaming=False n=1 max_tokens=None tiktoken_model_name=None<br></code></pre></td></tr></table></figure>

<p><img src="https://codestar.top/note-image/image-20231118180700050.png" srcset="/img/loading.gif" lazyload alt="image-20231118180700050"></p>
<p>è¿”å›å‚æ•°è¯´æ˜ï¼š</p>
<blockquote>
<ul>
<li><p>model_nameï¼šæ‰€è¦ä½¿ç”¨çš„æ¨¡å‹ï¼Œé»˜è®¤ä¸º â€˜gpt-3.5-turboâ€™ï¼Œå‚æ•°è®¾ç½®ä¸ OpenAI åŸç”Ÿæ¥å£å‚æ•°è®¾ç½®ä¸€è‡´ã€‚ </p>
</li>
<li><p>temperatureï¼šæ¸©åº¦ç³»æ•°ï¼Œå–å€¼åŒåŸç”Ÿæ¥å£ã€‚ </p>
</li>
<li><p>openai_api_keyï¼šOpenAI API keyï¼Œå¦‚æœä¸ä½¿ç”¨ç¯å¢ƒå˜é‡è®¾ç½® API Keyï¼Œä¹Ÿå¯ä»¥åœ¨å®ä¾‹åŒ–æ—¶è®¾ç½®ã€‚</p>
</li>
<li><p>openai_proxyï¼šè®¾ç½®ä»£ç†ï¼Œå¦‚æœä¸ä½¿ç”¨ç¯å¢ƒå˜é‡è®¾ç½®ä»£ç†ï¼Œä¹Ÿå¯ä»¥åœ¨å®ä¾‹åŒ–æ—¶è®¾ç½®ã€‚ </p>
</li>
<li><p>streamingï¼šæ˜¯å¦ä½¿ç”¨æµå¼ä¼ è¾“ï¼Œå³é€å­—è¾“å‡ºæ¨¡å‹å›ç­”ï¼Œé»˜è®¤ä¸º Falseã€‚</p>
</li>
<li><p>max_tokensï¼šæ¨¡å‹è¾“å‡ºçš„æœ€å¤§ token æ•°ï¼Œæ„ä¹‰åŠå–å€¼åŒä¸Šã€‚</p>
</li>
</ul>
</blockquote>
<h4 id="6ï¼‰LangChain-Templateé…ç½®prompt"><a href="#6ï¼‰LangChain-Templateé…ç½®prompt" class="headerlink" title="6ï¼‰LangChain Templateé…ç½®prompt"></a>6ï¼‰LangChain Templateé…ç½®prompt</h4><p>Templateå³æ¨¡æ¿ï¼Œæ˜¯LongChainä¸­çš„ä¸€ç§å›ºå®šçš„Promptæ ¼å¼ã€‚å¯ä»¥åœ¨Templateä¸­å¡«å…¥è‡ªå®šä¹‰çš„ä»»åŠ¡æ¥ä¾¿æ·çš„å®Œæˆä¸ªæ€§åŒ–ä»»åŠ¡çš„Promptè®¾ç½®ã€‚</p>
<p>1ã€æ„é€ ä¸€ä¸ªä¸ªæ€§åŒ– Templateï¼šTemplateå†™æ³•å›ºå®šæ ¼å¼ï¼Œå¯ä»¥è¾ƒå¤§ç¨‹åº¦å‘æŒ¥æ¨¡å‹æ€§èƒ½ã€‚</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">from</span> langchain.prompts <span class="hljs-keyword">import</span> ChatPromptTemplate<br><br><span class="hljs-comment"># templateå†…å®¹ï¼šè¿™é‡Œæˆ‘ä»¬è¦æ±‚æ¨¡å‹å¯¹ç»™å®šæ–‡æœ¬è¿›è¡Œä¸­æ–‡ç¿»è¯‘</span><br><span class="hljs-comment"># å›ºå®šå†™æ³•</span><br>template_string = <span class="hljs-string">&quot;&quot;&quot;Translate the text \</span><br><span class="hljs-string">that is delimited by triple backticks \</span><br><span class="hljs-string">into a Chinses. \</span><br><span class="hljs-string">text: ```&#123;text&#125;```</span><br><span class="hljs-string">&quot;&quot;&quot;</span><br><br><span class="hljs-comment"># æ¥ç€å°† Template å®ä¾‹åŒ–</span><br>chat_template = ChatPromptTemplate.from_template(template_string)<br></code></pre></td></tr></table></figure>

<p>2ã€é’ˆå¯¹æ¨¡å‹è°ƒç”¨ format æ–¹æ³•ï¼Œå°† template è½¬åŒ–ä¸ºæ¨¡å‹è¾“å…¥çš„å½¢å¼</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># æˆ‘ä»¬é¦–å…ˆè®¾ç½®å˜é‡å€¼</span><br>input_text = <span class="hljs-string">&quot;Today is a nice day.&quot;</span><br><br><span class="hljs-comment"># æ¥ç€è°ƒç”¨ format_messages å°† template è½¬åŒ–ä¸º message æ ¼å¼</span><br>message = chat_template.format_messages(text=input_text)<br><span class="hljs-built_in">print</span>(message)<br></code></pre></td></tr></table></figure>

<p>è½¬åŒ–çš„æ ¼å¼æ˜¯<strong>ä¸“ç”¨äºè°ƒç”¨ç±»ä¼¼äº ChatGPT çš„æ¨¡å‹æ ¼å¼</strong>çš„æ•°æ®ç±»å‹</p>
<p><img src="https://codestar.top/note-image/image-20231118201822434.png" srcset="/img/loading.gif" lazyload alt="image-20231118201822434"></p>
<p>3ã€ä½¿ç”¨templateæ ¼å¼æ•°æ®è°ƒç”¨chatgpt</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># å°†å®ä¾‹åŒ–çš„ç±»å‹ä¼ å…¥è®¾å®šå¥½çš„prompt</span><br><span class="hljs-comment"># æ­¤å¤„å­˜åœ¨é—®é¢˜--å¾…è°ƒè¯•ï¼š2 argument were given</span><br>response = ChatOpenAI(message)<br><span class="hljs-built_in">print</span>(response)<br></code></pre></td></tr></table></figure>

<p>å‚è€ƒï¼š<a target="_blank" rel="noopener" href="https://python.langchain.com.cn/docs/modules/model_io/prompts/prompt_templates/">æç¤ºæ¨¡æ¿ | ğŸ¦œï¸ğŸ”— Langchain</a></p>
<h3 id="3-2ã€æ–‡å¿ƒå¤§æ¨¡å‹APIè°ƒç”¨"><a href="#3-2ã€æ–‡å¿ƒå¤§æ¨¡å‹APIè°ƒç”¨" class="headerlink" title="3.2ã€æ–‡å¿ƒå¤§æ¨¡å‹APIè°ƒç”¨"></a>3.2ã€æ–‡å¿ƒå¤§æ¨¡å‹APIè°ƒç”¨</h3><h4 id="1ï¼‰æ–‡å¿ƒkeyè·å–"><a href="#1ï¼‰æ–‡å¿ƒkeyè·å–" class="headerlink" title="1ï¼‰æ–‡å¿ƒkeyè·å–"></a>1ï¼‰æ–‡å¿ƒkeyè·å–</h4><p>è¿›å…¥<a target="_blank" rel="noopener" href="https://console.bce.baidu.com/qianfan/overview">ç™¾åº¦äº‘åƒå¸†å¤§æ¨¡å‹å¹³å°</a>ï¼Œåº”ç”¨æ¥å…¥ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118132712169.png" srcset="/img/loading.gif" lazyload alt="image-20231118132712169"></p>
<p>åˆ›å»ºåº”ç”¨<strong>ï¼ˆéœ€è¦è´¦å·å·²ç»å®ååˆ¶ï¼‰</strong>ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118132911933.png" srcset="/img/loading.gif" lazyload alt="image-20231118132911933"></p>
<p>å¡«å†™åº”ç”¨åŸºæœ¬ä¿¡æ¯ï¼Œç¡®å®šè¿›å…¥ä¸‹ä¸€é¡µï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118133137495.png" srcset="/img/loading.gif" lazyload alt="image-20231118133137495"></p>
<p>åˆ›å»ºä¹‹åå°±å¯ä»¥åœ¨åº”ç”¨é¡µé¢æŸ¥çœ‹åˆ°æˆ‘ä»¬åˆšå»ºçš„åº”ç”¨ï¼Œå…¶ä¸­ä¼šå±•ç¤ºæˆ‘ä»¬æƒ³è¦çš„AppID<code>ã€</code>API Key<code>ã€</code>Secret Keyï¼šåç»­éœ€è¦ä½¿ç”¨åˆ°API Key<code>ã€</code>Secret Keyã€‚</p>
<p><img src="https://codestar.top/note-image/image-20231118133314183.png" srcset="/img/loading.gif" lazyload alt="image-20231118133314183"></p>
<h4 id="2ï¼‰APIåŸç”Ÿè°ƒç”¨"><a href="#2ï¼‰APIåŸç”Ÿè°ƒç”¨" class="headerlink" title="2ï¼‰APIåŸç”Ÿè°ƒç”¨"></a>2ï¼‰APIåŸç”Ÿè°ƒç”¨</h4><p>è·å–access_tokenï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> requests<br><span class="hljs-keyword">import</span> json<br><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_access_token</span>():<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    ä½¿ç”¨ API Keyï¼ŒSecret Key è·å–access_tokenï¼Œæ›¿æ¢ä¸‹åˆ—ç¤ºä¾‹ä¸­çš„åº”ç”¨API Keyã€åº”ç”¨Secret Key</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># æŒ‡å®šç½‘å€</span><br>    <span class="hljs-comment"># æ–‡å¿ƒæ¨¡å‹è°ƒç”¨ï¼šæ›¿æ¢&#123;api_key&#125;å’Œ&#123;secret_key&#125;</span><br>    url = <span class="hljs-string">&quot;https://aip.baidubce.com/oauth/2.0/token?grant_type=client_credentials&amp;client_id=&#123;api_key&#125;&amp;client_secret=&#123;secret_key&#125;&quot;</span><br>    <span class="hljs-comment"># è®¾ç½® POST è®¿é—®</span><br>    payload = json.dumps(<span class="hljs-string">&quot;&quot;</span>)<br>    headers = &#123;<br>        <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span>,<br>        <span class="hljs-string">&#x27;Accept&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span><br>    &#125;<br>    <span class="hljs-comment"># é€šè¿‡ POST è®¿é—®è·å–è´¦æˆ·å¯¹åº”çš„ access_token</span><br>    response = requests.request(<span class="hljs-string">&quot;POST&quot;</span>, url, headers=headers, data=payload)<br>    <span class="hljs-keyword">return</span> response.json().get(<span class="hljs-string">&quot;access_token&quot;</span>)<br><br></code></pre></td></tr></table></figure>

<p>æ­£å¸¸è¿”å›å¦‚ä¸‹ï¼Œé€šè¿‡access_tokenè®¿é—®æ–‡å¿ƒå¤§æ¨¡å‹ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118154840361.png" srcset="/img/loading.gif" lazyload alt="image-20231118154840361"></p>
<p>è°ƒç”¨æ–‡å¿ƒåŸç”ŸAPIï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_wenxin</span>(<span class="hljs-params">prompt</span>):<br>    <span class="hljs-string">&quot;&quot;&quot;</span><br><span class="hljs-string">    é€šè¿‡access_tokenè°ƒç”¨æ–‡å¿ƒä¸€è¨€æ¨¡å‹</span><br><span class="hljs-string">    :param prompt:ç”¨æˆ·è¾“å…¥å†…å®¹</span><br><span class="hljs-string">    :return:è¾“å‡ºç»“æœ</span><br><span class="hljs-string">    &quot;&quot;&quot;</span><br>    <span class="hljs-comment"># è°ƒç”¨æ¥å£</span><br>    <span class="hljs-comment"># å°†ä¸‹é¢&#123;access_token&#125;æ›¿æ¢ä¸ºget_access_token()è·å–åˆ°çš„access_token</span><br>    url = <span class="hljs-string">&quot;https://aip.baidubce.com/rpc/2.0/ai_custom/v1/wenxinworkshop/chat/eb-instant?access_token=&#123;access_token&#125;&quot;</span><br>    <span class="hljs-comment"># é…ç½® POST å‚æ•°</span><br>    payload = json.dumps(&#123;<br>        <span class="hljs-string">&quot;messages&quot;</span>: [<br>            &#123;<br>                <span class="hljs-string">&quot;role&quot;</span>: <span class="hljs-string">&quot;user&quot;</span>,<span class="hljs-comment"># user prompt</span><br>                <span class="hljs-string">&quot;content&quot;</span>: <span class="hljs-string">&quot;&#123;&#125;&quot;</span>.<span class="hljs-built_in">format</span>(prompt)<span class="hljs-comment"># è¾“å…¥çš„ prompt</span><br>            &#125;<br>        ]<br>    &#125;)<br>    headers = &#123;<br>        <span class="hljs-string">&#x27;Content-Type&#x27;</span>: <span class="hljs-string">&#x27;application/json&#x27;</span><br>    &#125;<br>    <span class="hljs-comment"># å‘èµ·è¯·æ±‚</span><br>    response = requests.request(<span class="hljs-string">&quot;POST&quot;</span>, url, headers=headers, data=payload)<br>    <span class="hljs-comment"># è¿”å›çš„æ˜¯ä¸€ä¸ª Json å­—ç¬¦ä¸²</span><br>    js = json.loads(response.text)<br>    <span class="hljs-built_in">print</span>(js[<span class="hljs-string">&quot;result&quot;</span>])<br><br></code></pre></td></tr></table></figure>

<p>è°ƒç”¨æ¨¡å‹ï¼ˆé»˜è®¤è°ƒç”¨çš„æ˜¯ERNIE-Bot-turboæ¨¡å‹ï¼‰ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">def</span> <span class="hljs-title function_">main</span>():<br>    <span class="hljs-comment"># access_token = get_access_token()</span><br>    <span class="hljs-comment"># print(&quot;access_token is:&quot;, access_token)</span><br>    get_wenxin(<span class="hljs-string">&quot;å…³äºNLP&quot;</span>)<br><br><br><span class="hljs-keyword">if</span> __name__ == <span class="hljs-string">&quot;__main__&quot;</span>:<br>    main()<br></code></pre></td></tr></table></figure>

<p>è°ƒç”¨æ­£å¸¸è¿”å›å¦‚ä¸‹ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118162155785.png" srcset="/img/loading.gif" lazyload alt="image-20231118162155785"></p>
<p>æ³¨æ„ï¼šæ–‡å¿ƒå¤§æ¨¡å‹ï¼Œå…è´¹ç”¨æˆ·1å¤©åªèƒ½è°ƒç”¨1æ¬¡ï¼Œå°è¯•å¤šæ¬¡ï¼Œéœ€è´­ä¹°tokenã€‚</p>
<p><img src="https://codestar.top/note-image/image-20231118161157679.png" srcset="/img/loading.gif" lazyload alt="image-20231118161157679"></p>
<p>æ³¨ï¼šæ–‡å¿ƒAPIè°ƒç”¨ä¸OpenAIç›¸ä¼¼ï¼Œä½†æ²¡æœ‰system promptçš„é…ç½®ï¼Œä»…æ”¯æŒ userã€assistant ã€‚</p>
<h4 id="3ï¼‰ä½¿ç”¨LangChainè‡ªå®šä¹‰æ–‡å¿ƒLLMâ€”å¾…å®Œå–„"><a href="#3ï¼‰ä½¿ç”¨LangChainè‡ªå®šä¹‰æ–‡å¿ƒLLMâ€”å¾…å®Œå–„" class="headerlink" title="3ï¼‰ä½¿ç”¨LangChainè‡ªå®šä¹‰æ–‡å¿ƒLLMâ€”å¾…å®Œå–„"></a>3ï¼‰ä½¿ç”¨LangChainè‡ªå®šä¹‰æ–‡å¿ƒLLMâ€”å¾…å®Œå–„</h4><h3 id="3-3ã€æ˜Ÿç«å¤§æ¨¡å‹APIè°ƒç”¨"><a href="#3-3ã€æ˜Ÿç«å¤§æ¨¡å‹APIè°ƒç”¨" class="headerlink" title="3.3ã€æ˜Ÿç«å¤§æ¨¡å‹APIè°ƒç”¨"></a>3.3ã€æ˜Ÿç«å¤§æ¨¡å‹APIè°ƒç”¨</h3><p>ç§‘å¤§è®¯é£æ——ä¸‹çš„ä¸€æ¬¾å¤§æ¨¡å‹äº§å“ï¼Œä¾§é‡äºä¸­æ–‡å†…å®¹ï¼Œæ˜¯ä¸€æ¬¾å…¸å‹çš„ä¸­æ–‡å¤§æ¨¡å‹ã€‚åœ¨å›½å†…ä¸æ–‡å¿ƒä¸€è¨€ä¸åˆ†ä¸Šä¸‹ã€‚</p>
<h4 id="1ï¼‰æ˜Ÿç«APIç”³è¯·"><a href="#1ï¼‰æ˜Ÿç«APIç”³è¯·" class="headerlink" title="1ï¼‰æ˜Ÿç«APIç”³è¯·"></a>1ï¼‰æ˜Ÿç«APIç”³è¯·</h4><p>è¿›å…¥<a target="_blank" rel="noopener" href="https://console.xfyun.cn/app/create?redirect=/services/bm2">è®¯é£å¼€æ”¾å¹³å°</a>ç”³è¯·ï¼šåˆ›å»º1ä¸ªæ–°åº”ç”¨ï¼Œå¡«å†™åº”ç”¨åŸºæœ¬ä¿¡æ¯</p>
<p><img src="https://codestar.top/note-image/image-20231118212010453.png" srcset="/img/loading.gif" lazyload alt="image-20231118212010453"></p>
<p>åˆ›å»ºå®Œäº†ä¹‹åä¼šåœ¨æ­¤å¤„å±•ç¤ºæˆ‘ä»¬éœ€è¦çš„APPIDã€APISecretã€APIKeyï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118213029660.png" srcset="/img/loading.gif" lazyload alt="image-20231118213029660"></p>
<h4 id="2ï¼‰é¢†å–å…è´¹token"><a href="#2ï¼‰é¢†å–å…è´¹token" class="headerlink" title="2ï¼‰é¢†å–å…è´¹token"></a>2ï¼‰é¢†å–å…è´¹token</h4><p>åœ¨åº”ç”¨æ§åˆ¶å°ï¼Œå®æ—¶ç”¨é‡ï¼Œç‚¹å‡»<code>ç«‹å³è´­ä¹°</code>ï¼ˆå¿…é¡»è¦å…ˆå®åï¼‰ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118213414904.png" srcset="/img/loading.gif" lazyload alt="image-20231118213414904"></p>
<p>é€‰æ‹©â€å…è´¹åŒ…ï¼ˆä¸ªäººè®¤è¯ï¼‰â€ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118213512966.png" srcset="/img/loading.gif" lazyload alt="image-20231118213512966"></p>
<p>é€‰æ‹©OKä¹‹åï¼Œç«‹å³ä¸‹å•ï¼Œå°±èƒ½æˆåŠŸè´­ä¹°äº†ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118213614738.png" srcset="/img/loading.gif" lazyload alt="image-20231118213614738"></p>
<p>å…è´¹tokené¢åº¦ä¼šåŒæ­¥åˆ·æ–°ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118213659585.png" srcset="/img/loading.gif" lazyload alt="image-20231118213659585"></p>
<h4 id="3ï¼‰æ˜Ÿç«APIè°ƒç”¨"><a href="#3ï¼‰æ˜Ÿç«APIè°ƒç”¨" class="headerlink" title="3ï¼‰æ˜Ÿç«APIè°ƒç”¨"></a>3ï¼‰æ˜Ÿç«APIè°ƒç”¨</h4><h5 id="3-1ï¼‰Sparkç›¸å…³åº“é…ç½®"><a href="#3-1ï¼‰Sparkç›¸å…³åº“é…ç½®" class="headerlink" title="3.1ï¼‰Sparkç›¸å…³åº“é…ç½®"></a>3.1ï¼‰Sparkç›¸å…³åº“é…ç½®</h5><p>ç”±äºæ˜Ÿç« API éœ€è¦é€šè¿‡ WebSocket è¿›è¡Œè¿æ¥ï¼Œç›¸å¯¹éº»çƒ¦ï¼Œè¿™ä¸€æ­¥éœ€è¦å°†SparkApi.pyã€SparkApiSelf.pyä¸¤å„ä¸ªæ–‡ä»¶æ”¾ç½®äºé¡¹ç›®æ ¹ç›®å½•ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118231656262.png" srcset="/img/loading.gif" lazyload alt="image-20231118231656262"></p>
<p>æºæ–‡ä»¶ï¼Œä»datawhaleä»“åº“è·¯å¾„å–ï¼š<a target="_blank" rel="noopener" href="https://github.com/datawhalechina/llm-universe/tree/main/notebook/C2%20%E8%B0%83%E7%94%A8%E5%A4%A7%E6%A8%A1%E5%9E%8B%20API">https://github.com/datawhalechina/llm-universe/tree/main/notebook/C2%20%E8%B0%83%E7%94%A8%E5%A4%A7%E6%A8%A1%E5%9E%8B%20API</a></p>
<p><img src="https://codestar.top/note-image/image-20231118232326070.png" srcset="/img/loading.gif" lazyload alt="image-20231118232326070"></p>
<h5 id="3-2ï¼‰Spark-APIè°ƒç”¨"><a href="#3-2ï¼‰Spark-APIè°ƒç”¨" class="headerlink" title="3.2ï¼‰Spark APIè°ƒç”¨"></a>3.2ï¼‰Spark APIè°ƒç”¨</h5><p>å®Œæ•´è°ƒç”¨ä»£ç ï¼Œè°ƒç”¨çš„ä¼ å‚å’Œæ–‡å¿ƒç±»ä¼¼ï¼Œå‡ä¸ºåˆ—è¡¨ç±»å‹ã€‚å…¶ä¸­è¦æ ¹æ®å®é™…ç”³è¯·çš„æ˜Ÿç«å¤§æ¨¡å‹çš„ç‰ˆæœ¬æ¥é…ç½®<code>domain</code>ã€<code>Spark_url</code>ï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> SparkApi<br><br><span class="hljs-comment"># 1ã€é…ç½®å¯†é’¥ä¿¡æ¯</span><br>appid = <span class="hljs-string">&quot;APPID&quot;</span>     <span class="hljs-comment">#å¡«å†™æ§åˆ¶å°ä¸­è·å–çš„ APPID ä¿¡æ¯</span><br>api_secret = <span class="hljs-string">&quot;APISecret&quot;</span>   <span class="hljs-comment">#å¡«å†™æ§åˆ¶å°ä¸­è·å–çš„ APISecret ä¿¡æ¯</span><br>api_key =<span class="hljs-string">&quot;APIKey&quot;</span>    <span class="hljs-comment">#å¡«å†™æ§åˆ¶å°ä¸­è·å–çš„ APIKey ä¿¡æ¯</span><br><br><span class="hljs-comment"># 2ã€é…ç½®å¤§æ¨¡å‹ç‰ˆæœ¬ï¼Œé»˜è®¤â€œgeneral/generalv2â€ï¼šæ ¹æ®å®é™…ç”³è¯·çš„ç‰ˆæœ¬é€‰å–</span><br><span class="hljs-comment"># domain = &quot;general&quot;   # v1.5ç‰ˆæœ¬</span><br>domain = <span class="hljs-string">&quot;generalv2&quot;</span>    <span class="hljs-comment"># v2.0ç‰ˆæœ¬</span><br><br><br><span class="hljs-comment"># 3ã€é…ç½®äº‘ç«¯ç¯å¢ƒçš„æœåŠ¡åœ°å€ï¼šæ ¹æ®å®é™…ç”³è¯·çš„ç‰ˆæœ¬é€‰å–</span><br><span class="hljs-comment"># Spark_url = &quot;ws://spark-api.xf-yun.com/v1.1/chat&quot;  # v1.5ç¯å¢ƒçš„åœ°å€</span><br>Spark_url = <span class="hljs-string">&quot;ws://spark-api.xf-yun.com/v2.1/chat&quot;</span>  <span class="hljs-comment"># v2.0ç¯å¢ƒçš„åœ°å€</span><br><br><span class="hljs-comment"># 4ã€å°è£…å°†ç”¨æˆ·è¾“å…¥çš„promptè½¬åŒ–ä¸ºä¼ å…¥å‚æ•°çš„å‡½æ•°</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_text</span>(<span class="hljs-params">role, content, text = []</span>):<br>    <span class="hljs-comment"># role æ˜¯æŒ‡å®šè§’è‰²ï¼Œcontent æ˜¯ prompt å†…å®¹</span><br>    jsoncon = &#123;&#125;<br>    jsoncon[<span class="hljs-string">&quot;role&quot;</span>] = role<br>    jsoncon[<span class="hljs-string">&quot;content&quot;</span>] = content<br>    text.append(jsoncon)<br>    <span class="hljs-keyword">return</span> text<br><br><span class="hljs-comment"># 5ã€å°†ç”¨æˆ·è¾“å…¥ prompt å°è£…ä¸ºä¼ å…¥å‚æ•°åˆ—è¡¨</span><br>question = get_text(<span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-string">&quot;ä½ å¥½&quot;</span>)<br><span class="hljs-built_in">print</span>(question)<br><br><span class="hljs-comment"># 6ã€è°ƒç”¨SparkApi.py ä¸­å°è£…çš„ main å‡½æ•°</span><br>response = SparkApi.main(appid,api_key,api_secret,Spark_url,domain,question)<br></code></pre></td></tr></table></figure>

<p>æˆåŠŸè°ƒç”¨å¦‚ä¸‹ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231119003052282.png" srcset="/img/loading.gif" lazyload alt="image-20231119003052282"></p>
<h3 id="3-4ã€æ™ºè°±GLM-APIè°ƒç”¨"><a href="#3-4ã€æ™ºè°±GLM-APIè°ƒç”¨" class="headerlink" title="3.4ã€æ™ºè°±GLM APIè°ƒç”¨"></a>3.4ã€æ™ºè°±GLM APIè°ƒç”¨</h3><p>GLMä¸ºæ™ºè°±AIä¸æ¸…åå¤§å­¦å…±åŒåˆä½œå¼€å‘çš„ä¸€æ¬¾è®¤çŸ¥å¤§æ¨¡å‹ï¼Œä¸ºæ–°ä¸€ä»£é€šç”¨å¤§æ¨¡å‹ï¼Œæ¥ä¸‹æ¥å°†å±•å¼€å®ç°GLM APIçš„è°ƒç”¨è¿‡ç¨‹ã€‚</p>
<h4 id="1ï¼‰GLM-APIç”³è¯·"><a href="#1ï¼‰GLM-APIç”³è¯·" class="headerlink" title="1ï¼‰GLM APIç”³è¯·"></a>1ï¼‰GLM APIç”³è¯·</h4><p>è¿›å…¥<a target="_blank" rel="noopener" href="https://open.bigmodel.cn/overview">æ™ºè°±AIå¼€æ”¾å¹³å°</a>ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118212311798.png" srcset="/img/loading.gif" lazyload alt="image-20231118212311798"></p>
<p>è¿›å…¥<code>æŸ¥çœ‹API Key</code>ï¼Œå¼€å§‹åˆ›å»ºAPI Keyï¼šåˆå§‹è´¦å·ä¼šå­˜åœ¨ä¸€ä¸ªç³»ç»Ÿé»˜è®¤çš„keyï¼Œå¹¶ä¸”å­˜åœ¨èµ é€çš„18å…ƒtokené¢åº¦</p>
<p><img src="https://codestar.top/note-image/image-20231118212805541.png" srcset="/img/loading.gif" lazyload alt="image-20231118212805541"></p>
<p>æ–°å»ºä¸€ä¸ªæ–°çš„Keyï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118212601456.png" srcset="/img/loading.gif" lazyload alt="image-20231118212601456"></p>
<p>ä¹‹åä¼šå­˜åœ¨ä¸¤ä¸ªAPI Keyï¼šä¸€ä¸ªè‡ªå·±æ–°å»ºçš„Keyï¼Œä¸€ä¸ªç³»ç»Ÿé»˜è®¤çš„Key</p>
<p><img src="https://codestar.top/note-image/image-20231118212648942.png" srcset="/img/loading.gif" lazyload alt="image-20231118212648942"></p>
<p>APIä»·æ ¼ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118214001933.png" srcset="/img/loading.gif" lazyload alt="image-20231118214001933"></p>
<h4 id="2ï¼‰è°ƒç”¨æ™ºè°±å¤§æ¨¡å‹API"><a href="#2ï¼‰è°ƒç”¨æ™ºè°±å¤§æ¨¡å‹API" class="headerlink" title="2ï¼‰è°ƒç”¨æ™ºè°±å¤§æ¨¡å‹API"></a>2ï¼‰è°ƒç”¨æ™ºè°±å¤§æ¨¡å‹API</h4><p>æ™ºè°±AIæ”¯æŒSDK å’ŒåŸç”Ÿ HTTPæ¥è°ƒç”¨æ¨¡å‹ï¼Œæœ¬èŠ‚ä»¥SDKä¸ºä¸»ï¼š</p>
<p>ç¯å¢ƒä¸­å®‰è£…é…ç½®ç¤ºä¾‹ä¸­çš„æ‰€éœ€ç¬¬ä¸‰æ–¹åº“</p>
<h5 id="2-1ï¼‰å®‰è£…zhipuåº“"><a href="#2-1ï¼‰å®‰è£…zhipuåº“" class="headerlink" title="2.1ï¼‰å®‰è£…zhipuåº“"></a>2.1ï¼‰å®‰è£…zhipuåº“</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs python">pip install zhipuai -i https://pypi.tuna.tsinghua.edu.cn/simple/<br></code></pre></td></tr></table></figure>

<p>åœ¨ç¬¬2ç« ä¸­ï¼Œå·²ç»å°†ç¯å¢ƒæå‰å‡†å¤‡å¥½äº†ï¼Œè¿™é‡Œæ‰§è¡ŒæŒ‡ä»¤å¯ä»¥åšä¸ªæ£€æŸ¥ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118222548647.png" srcset="/img/loading.gif" lazyload alt="image-20231118222548647"></p>
<h5 id="2-2ï¼‰APIè°ƒç”¨"><a href="#2-2ï¼‰APIè°ƒç”¨" class="headerlink" title="2.2ï¼‰APIè°ƒç”¨"></a>2.2ï¼‰APIè°ƒç”¨</h5><p>åˆ†ä¸ºä¸‹é¢å‡ æ®µï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-keyword">import</span> zhipuai<br><br><span class="hljs-comment"># 1ã€é…ç½®keyå’Œmodel</span><br>zhipuai.api_key = <span class="hljs-string">&quot;zhipu_key&quot;</span> <span class="hljs-comment">#å¡«å†™æ§åˆ¶å°ä¸­è·å–çš„ APIKey ä¿¡æ¯</span><br>model = <span class="hljs-string">&quot;chatglm_std&quot;</span> <span class="hljs-comment">#ç”¨äºé…ç½®å¤§æ¨¡å‹ç‰ˆæœ¬</span><br><br><br><span class="hljs-comment"># 2ã€å°†ç”¨æˆ·è¾“å…¥çš„promptè½¬åŒ–ä¸ºä¼ å…¥å‚æ•°ï¼Œè¾“å‡ºçš„ç»“æœä¸ºåˆ—è¡¨</span><br><span class="hljs-keyword">def</span> <span class="hljs-title function_">get_text</span>(<span class="hljs-params">role, content, text = []</span>):<br>    <span class="hljs-comment"># role æ˜¯æŒ‡å®šè§’è‰²ï¼Œcontent æ˜¯ prompt å†…å®¹</span><br>    jsoncon = &#123;&#125;<br>    jsoncon[<span class="hljs-string">&quot;role&quot;</span>] = role<br>    jsoncon[<span class="hljs-string">&quot;content&quot;</span>] = content<br>    text.append(jsoncon)<br>    <span class="hljs-keyword">return</span> text<br><br><br><span class="hljs-comment"># 3ã€å°†ä¸€ä¸ªç”¨æˆ·è¾“å…¥ prompt å°è£…ä¸ºè¿™æ ·ä¸€ä¸ªä¼ å…¥å‚æ•°åˆ—è¡¨</span><br>question = get_text(<span class="hljs-string">&quot;user&quot;</span>, <span class="hljs-string">&quot;ä½ å¥½&quot;</span>)<br><span class="hljs-built_in">print</span>(question)<br></code></pre></td></tr></table></figure>

<p><img src="https://codestar.top/note-image/image-20231118224838824.png" srcset="/img/loading.gif" lazyload alt="image-20231118224838824"></p>
<p>è°ƒç”¨AIï¼š</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs python"><span class="hljs-comment"># 4ã€è¯·æ±‚æ¨¡å‹ï¼šè°ƒç”¨zhipuai SDK ä¸­å°è£…çš„ invoke å‡½æ•°</span><br>response = zhipuai.model_api.invoke(<br>    model=model,<br>    prompt=question<br>)<br><span class="hljs-built_in">print</span>(response)<br></code></pre></td></tr></table></figure>

<p>è°ƒç”¨æˆåŠŸç»“æœå¦‚ä¸‹ï¼š</p>
<p><img src="https://codestar.top/note-image/image-20231118225023072.png" srcset="/img/loading.gif" lazyload alt="image-20231118225023072"></p>
<p>å¸¸ç”¨ä¼ å…¥å‚æ•°ä»‹ç»ï¼š</p>
<blockquote>
<ul>
<li><code>prompt (list)</code>: è°ƒç”¨å¯¹è¯æ¨¡å‹æ—¶ï¼Œå°†å½“å‰å¯¹è¯ä¿¡æ¯åˆ—è¡¨ä½œä¸ºæç¤ºè¾“å…¥ç»™æ¨¡å‹; æŒ‰ç…§ {â€œroleâ€: â€œuserâ€, â€œcontentâ€: â€œä½ å¥½â€} çš„é”®å€¼å¯¹å½¢å¼è¿›è¡Œä¼ å‚; æ€»é•¿åº¦è¶…è¿‡æ¨¡å‹æœ€é•¿è¾“å…¥é™åˆ¶åä¼šè‡ªåŠ¨æˆªæ–­ï¼Œéœ€æŒ‰æ—¶é—´ç”±æ—§åˆ°æ–°æ’åºã€‚</li>
<li><code>temperature (float)</code>: é‡‡æ ·æ¸©åº¦ï¼Œæ§åˆ¶è¾“å‡ºçš„éšæœºæ€§ï¼Œå¿…é¡»ä¸ºæ­£æ•°å–å€¼èŒƒå›´æ˜¯ï¼š(0.0,1.0]ï¼Œä¸èƒ½ç­‰äº 0ï¼Œé»˜è®¤å€¼ä¸º 0.95 å€¼è¶Šå¤§ï¼Œä¼šä½¿è¾“å‡ºæ›´éšæœºï¼Œæ›´å…·åˆ›é€ æ€§ï¼›å€¼è¶Šå°ï¼Œè¾“å‡ºä¼šæ›´åŠ ç¨³å®šæˆ–ç¡®å®šã€‚</li>
<li><code>top_p (float)</code>: ç”¨æ¸©åº¦å–æ ·çš„å¦ä¸€ç§æ–¹æ³•ï¼Œç§°ä¸ºæ ¸å–æ ·ã€‚å–å€¼èŒƒå›´æ˜¯ï¼š(0.0, 1.0) å¼€åŒºé—´ï¼Œä¸èƒ½ç­‰äº 0 æˆ– 1ï¼Œé»˜è®¤å€¼ä¸º 0.7ã€‚æ¨¡å‹è€ƒè™‘å…·æœ‰ top_p æ¦‚ç‡è´¨é‡ tokens çš„ç»“æœã€‚ä¾‹å¦‚ï¼š0.1 æ„å‘³ç€æ¨¡å‹è§£ç å™¨åªè€ƒè™‘ä»å‰ 10% çš„æ¦‚ç‡çš„å€™é€‰é›†ä¸­å– tokensã€‚</li>
<li><code>request_id (string)</code>: ç”±ç”¨æˆ·ç«¯ä¼ å‚ï¼Œéœ€ä¿è¯å”¯ä¸€æ€§ï¼›ç”¨äºåŒºåˆ†æ¯æ¬¡è¯·æ±‚çš„å”¯ä¸€æ ‡è¯†ï¼Œç”¨æˆ·ç«¯ä¸ä¼ æ—¶å¹³å°ä¼šé»˜è®¤ç”Ÿæˆ</li>
<li><code>return_type (string)</code>: ç”¨äºæ§åˆ¶æ¯æ¬¡è¿”å›å†…å®¹çš„ç±»å‹ï¼Œç©ºæˆ–è€…æ²¡æœ‰æ­¤å­—æ®µæ—¶é»˜è®¤æŒ‰ç…§ json_string è¿”å›ã€‚<code>json_string</code> è¿”å›æ ‡å‡†çš„ JSON å­—ç¬¦ä¸²ã€‚<code>text</code> è¿”å›åŸå§‹çš„æ–‡æœ¬å†…å®¹</li>
</ul>
</blockquote>
<p><strong>æ³¨ï¼š</strong>ä¸å»ºè®®åŒæ—¶è°ƒæ•´<code>temperature</code>å’Œ <code>top_p </code>ï¼Œæ ¹æ®å…·ä½“åœºæ™¯å•ç‹¬è°ƒæ•´1ä¸ªå³å¯ã€‚æ¥å£æ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://open.bigmodel.cn/dev/api">https://open.bigmodel.cn/dev/api</a></p>
<p>å‚è€ƒæ–‡æ¡£ï¼š<a target="_blank" rel="noopener" href="https://datawhalechina.github.io/llm-universe/#/C2/4.%20%E8%B0%83%E7%94%A8%E8%AE%AF%E9%A3%9E%E6%98%9F%E7%81%AB">https://datawhalechina.github.io/llm-universe/#/C2/4.%20%E8%B0%83%E7%94%A8%E8%AE%AF%E9%A3%9E%E6%98%9F%E7%81%AB</a></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/AI-ML/" class="category-chain-item">AI&amp;ML</a>
  
  
    <span>></span>
    
  <a href="/categories/AI-ML/LLM/" class="category-chain-item">LLM</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/Datawhale/" class="print-no-link">#Datawhale</a>
      
        <a href="/tags/LLM/" class="print-no-link">#LLM</a>
      
        <a href="/tags/AI-ML/" class="print-no-link">#AI&ML</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>LLMç¬”è®°2-1ï¼šPythonå®ç°å¤§æ¨¡å‹APIçš„è°ƒç”¨</div>
      <div>http://www.codestar.top/2023/11/19/AI&amp;ML/DatawhaleLearn/LLMç¬”è®°2-1ï¼šPythonå®ç°å¤§æ¨¡å‹APIçš„è°ƒç”¨/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>ä½œè€…</div>
          <div>miniå°æ–°</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>å‘å¸ƒäº</div>
          <div>2023å¹´11æœˆ19æ—¥</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>æ›´æ–°äº</div>
          <div>2023å¹´11æœˆ19æ—¥</div>
        </div>
      
      
        <div class="license-meta-item">
          <div>è®¸å¯åè®®</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - ç½²å">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="NC - éå•†ä¸šæ€§ä½¿ç”¨">
                    <i class="iconfont icon-nc"></i>
                  </span>
                </a>
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">
                  <span class="hint--top hint--rounded" aria-label="SA - ç›¸åŒæ–¹å¼å…±äº«">
                    <i class="iconfont icon-sa"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2023/11/19/Coding/Python/Python%E6%89%A7%E8%A1%8Cwebsocket%E8%BF%9E%E6%8E%A5%E5%87%BA%E7%8E%B0websocket-has-no-attribute-enableTrace%E9%94%99%E8%AF%AF/" title="Pythonæ‰§è¡Œwebsocketè¿æ¥å‡ºç°websocket has no attribute enableTraceé”™è¯¯">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Pythonæ‰§è¡Œwebsocketè¿æ¥å‡ºç°websocket has no attribute enableTraceé”™è¯¯</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2023/11/17/SQL/SQL%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B01%EF%BC%9ASQL%E8%AF%AD%E6%B3%95%E7%BB%93%E6%9E%84%E5%8F%8ADDL-CREATE%E6%8C%87%E4%BB%A4/" title="SQLå­¦ä¹ ç¬”è®°1ï¼šSQLè¯­æ³•ç»“æ„åŠDDL CREATEæŒ‡ä»¤">
                        <span class="hidden-mobile">SQLå­¦ä¹ ç¬”è®°1ï¼šSQLè¯­æ³•ç»“æ„åŠDDL CREATEæŒ‡ä»¤</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  
  
    <article id="comments" lazyload>
      
  <div id="waline"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#waline', function() {
      Fluid.utils.createCssLink('https://cdn.staticfile.org/waline/2.15.5/waline.min.css')
      Fluid.utils.createScript('https://cdn.staticfile.org/waline/2.15.5/waline.min.js', function() {
        var options = Object.assign(
          {"serverURL":"https://waline-for-blog-zeta.vercel.app","path":"window.location.pathname","meta":["nick","mail","link"],"requiredMeta":["nick"],"lang":"zh-CN","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis/bmoji","https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo","https://cdn.jsdelivr.net/gh/walinejs/emojis/qq","https://cdn.jsdelivr.net/gh/walinejs/emojis/bilibili"],"dark":"html[data-user-color-scheme=\"dark\"]","wordLimit":0,"pageSize":10,"locale":{"placeholder":"ç•™ä¸‹ä½ çš„è¶³è¿¹ï¼Œå­˜ä¸‹ä½ çš„å»ºè®®~","reactionTitle":"ç‚¹èµ"},"copyright":false},
          {
            el: '#waline',
            path: window.location.pathname
          }
        )
        Waline.init(options);
        Fluid.utils.waitElementVisible('#waline .vcontent', () => {
          var imgSelector = '#waline .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


    </article>
  


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>ç›®å½•</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  









    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-icon-star-on"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <div style="font-size: 0.85rem"> <span>Copyright Â© 2022-2023. All Rights Reserved.</span><br> <span id="timeDate">è½½å…¥å¤©æ•°...</span> <span id="times">è½½å…¥æ—¶åˆ†ç§’...</span> <script src="/js/duration.js"></script> </div>
    </div>
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        æ€»è®¿é—®é‡ 
        <span id="leancloud-site-pv"></span>
         æ¬¡
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        æ€»è®¿å®¢æ•° 
        <span id="leancloud-site-uv"></span>
         äºº
      </span>
    
    

  
</div>

  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        if (!window.MathJax) {
          window.MathJax = {
            tex    : {
              inlineMath: { '[+]': [['$', '$']] }
            },
            loader : {
              load: ['ui/lazy']
            },
            options: {
              renderActions: {
                insertedScript: [200, () => {
                  document.querySelectorAll('mjx-container').forEach(node => {
                    let target = node.parentNode;
                    if (target.nodeName.toLowerCase() === 'li') {
                      target.parentNode.classList.add('has-jax');
                    }
                  });
                }, '', false]
              }
            }
          };
        } else {
          MathJax.startup.document.state(0);
          MathJax.texReset();
          MathJax.typeset();
          MathJax.typesetPromise();
        }

        Fluid.events.registerRefreshCallback(function() {
          if ('MathJax' in window && MathJax.startup.document && typeof MathJax.startup.document.state === 'function') {
            MathJax.startup.document.state(0);
            MathJax.texReset();
            MathJax.typeset();
            MathJax.typesetPromise();
          }
        });
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.2/es5/tex-mml-chtml.js" ></script>

  <script defer src="/js/leancloud.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" ></script>





<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ï¼Œå°†å®ƒä¿æŒåœ¨æœ€åº•éƒ¨ -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">åšå®¢åœ¨å…è®¸ JavaScript è¿è¡Œçš„ç¯å¢ƒä¸‹æµè§ˆæ•ˆæœæ›´ä½³</div>
  </noscript>
</body>
</html>
